<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><script>
                        window.dataLayer = window.dataLayer || [];
                        function gtag(){dataLayer.push(arguments);}
                        gtag('js', new Date());
                        gtag('config', 'G-GMHYS5H2BM', {
                        page_path: window.location.pathname,
                        });
                        </script><meta name="google-site-verification" content="-IYFAYTqi7mYYCPb6BhJKCcZVcWghBEgTqFyxyXrNBc"/><meta name="naver-site-verification" content="869be3cd7f5f9946dbdd42922f42f54838b579c5"/><meta name="next-head-count" content="5"/><link rel="preload" href="/_next/static/css/703309190fe4a24f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/703309190fe4a24f.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-7fcf30080e790857.js" defer=""></script><script src="/_next/static/chunks/framework-bb5c596eafb42b22.js" defer=""></script><script src="/_next/static/chunks/main-acf70204e036151b.js" defer=""></script><script src="/_next/static/chunks/pages/_app-fb25d9ed5ba70552.js" defer=""></script><script src="/_next/static/chunks/838-07ce0bc3d5f0a553.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5BpostId%5D-e6be2160b79de1f8.js" defer=""></script><script src="/_next/static/duOvbHUXu5a5ex6LfSiN2/_buildManifest.js" defer=""></script><script src="/_next/static/duOvbHUXu5a5ex6LfSiN2/_ssgManifest.js" defer=""></script><script src="/_next/static/duOvbHUXu5a5ex6LfSiN2/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><style data-emotion="css tlc243">.css-tlc243{color:#333;}</style><div class="css-tlc243"><style data-emotion="css nmrzmf">.css-nmrzmf{border-bottom:1px solid #0C8346;}.css-nmrzmf.header-get-on{z-index:10;position:fixed;top:0;width:100%;}</style><header class=" css-nmrzmf"><style data-emotion="css tuhu7l">.css-tuhu7l{padding:7px 8px;background:#fff;}.css-tuhu7l .navbar-container{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-left:auto;margin-right:auto;width:100%;}.css-tuhu7l .navbar-blog-name{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-style:italic;font-size:20px;color:#333;font-weight:bold;white-space:nowrap;}.css-tuhu7l .navbar-blog-name:hover{font-style:normal;}.css-tuhu7l .navbar-dropdown-button{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-left:12px;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;padding:0 4px;}@media(min-width: 768px){.css-tuhu7l .navbar-dropdown-button{display:none;}}.css-tuhu7l .navbar-menu-list-wrapper{width:100%;margin-bottom:-6px;}@media(min-width: 768px){.css-tuhu7l .navbar-menu-list-wrapper{border:0;display:block;width:auto;margin-bottom:0;}}.css-tuhu7l .navbar-menu-list-wrapper .navbar-menu-list{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;font-size:14px;margin:16px -8px 0 -8px;}.css-tuhu7l .navbar-menu-list-wrapper .navbar-menu-list .navbar-menu:not(:first-of-type){border-top:1px solid #0C8346;}@media(min-width: 768px){.css-tuhu7l .navbar-menu-list-wrapper .navbar-menu-list{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;margin:0;font-size:14px;line-height:20px;}.css-tuhu7l .navbar-menu-list-wrapper .navbar-menu-list .navbar-menu:not(:first-of-type){border-top:0;border-left:1px solid #0C8346;}}</style><nav class="css-tuhu7l"><div class="navbar-container"><a class="navbar-blog-name" href="/">MERRI`s DEVELOG</a><button type="button" class="navbar-dropdown-button"><span class="sr-only">Open blog menu</span>📚</button><style data-emotion="css 1hyfx7x">.css-1hyfx7x{display:none;}</style><div class="navbar-menu-list-wrapper css-1hyfx7x"><ul class="navbar-menu-list"><style data-emotion="css nvv0w9">@media(min-width: 768px){.css-nvv0w9{padding:10px 20px 7px;margin:-10px 0 -10px -1px;}.css-nvv0w9.active-link-home{padding-bottom:12px;}}</style><li class="navbar-menu css-nvv0w9"></li><style data-emotion="css e7ia66">.css-e7ia66:hover{background:#8FD5A6;transition-duration:500ms;}.css-e7ia66:hover .navbar-menu-link,.css-e7ia66:hover .navbar-menu a{color:#333;}</style><style data-emotion="css 19x6ejr">@media(min-width: 768px){.css-19x6ejr{padding:10px 20px 7px;margin:-10px 0 -10px -1px;}.css-19x6ejr.active-link-home{padding-bottom:12px;}}.css-19x6ejr:hover{background:#8FD5A6;transition-duration:500ms;}.css-19x6ejr:hover .navbar-menu-link,.css-19x6ejr:hover .navbar-menu a{color:#333;}</style><li class="navbar-menu true css-19x6ejr"><style data-emotion="css mnwgy4">.css-mnwgy4{border-bottom:6px solid #E5C2C0;}</style><style data-emotion="css 4xdf42">.css-4xdf42{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:9px 16px 9px 12px;width:100%;border-bottom:6px solid #E5C2C0;}.css-4xdf42:hover{border:1 solid #8FD5A6;color:#333;transition-duration:500ms;}@media(min-width: 768px){.css-4xdf42{padding:16px 12px 7px;margin:-14px -20px -7px;width:auto;}}</style><button data-dropdown-for="dropdown_Blog" class="css-4xdf42">Blog<!-- --> 📔</button><style data-emotion="css ewer5w">.css-ewer5w{display:none;}</style><style data-emotion="css j3irkc">.css-j3irkc{background:#fff;border:1px solid #0C8346;margin:8px 20px;position:relative;width:auto;z-index:0;display:none;}@media(min-width: 768px){.css-j3irkc{margin:6px;position:absolute;z-index:10;}}.css-j3irkc .dropdown-menu-list{font-size:14px;padding:4px 0;}.css-j3irkc .dropdown-menu-list .dropdown-menu-list-part-name{color:#333;font-size:12px;font-weight:bold;padding-left:8px;}.css-j3irkc .dropdown-menu-list li{border:0;}.css-j3irkc .dropdown-menu-list a{display:block;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;padding:8px 16px;}.css-j3irkc .dropdown-menu-list a:hover{background:#8FD5A6;color:#fff;transition-duration:300ms;}.css-j3irkc .dropdown-menu-list .dropdown-menu-active-link{background:#E5C2C0;}.css-j3irkc ul:not(:first-of-type){border-top:1px solid #8FD5A6;}</style><div id="dropdown_Blog" class="css-j3irkc"><ul class="dropdown-menu-list"><span class="dropdown-menu-list-part-name">BACKEND</span><li><a class="" href="/blog/category/spring">Spring</a></li><li><a class="" href="/blog/category/java">Java</a></li></ul><ul class="dropdown-menu-list"><span class="dropdown-menu-list-part-name">SW</span><li><a class="" href="/blog/category/security">Security</a></li><li><a class="" href="/blog/category/design%20pattern">Design pattern</a></li></ul><ul class="dropdown-menu-list"><span class="dropdown-menu-list-part-name">INFRA</span><li><a class="" href="/blog/category/kubernetes">Kubernetes</a></li><li><a class="" href="/blog/category/network">Network</a></li></ul><ul class="dropdown-menu-list"><span class="dropdown-menu-list-part-name">CLOUD</span><li><a class="" href="/blog/category/aws">Aws</a></li></ul><ul class="dropdown-menu-list"><span class="dropdown-menu-list-part-name">OS</span><li><a class="" href="/blog/category/window">Window</a></li><li><a class="" href="/blog/category/linux">Linux</a></li></ul><ul class="dropdown-menu-list"><span class="dropdown-menu-list-part-name">FRONTEND</span><li><a class="" href="/blog/category/javascript">Javascript</a></li></ul><ul class="dropdown-menu-list"><span class="dropdown-menu-list-part-name">TOOL</span><li><a class="" href="/blog/category/git">Git</a></li></ul><ul class="dropdown-menu-list"><span class="dropdown-menu-list-part-name">IDEA</span><li><a class="" href="/blog/category/intellij">Intellij</a></li></ul></div></li><li class="navbar-menu true css-19x6ejr"><style data-emotion="css a3e3m7">.css-a3e3m7{cursor:pointer;display:block;padding:8px 16px 8px 12px;}@media(min-width: 768px){.css-a3e3m7{padding-bottom:7px;padding-top:7px;padding-right:12px;margin:-7px -20px;}}.css-a3e3m7.navbar-menu-active-link{border-bottom:6px solid transparent;border-image:linear-gradient(to right, #E5C2C0 25%, #fff 25%) 1 100%;border-image-slice:1;}@media(min-width: 768px){.css-a3e3m7.navbar-menu-active-link{border-image:linear-gradient(to right, #E5C2C0 100%, #fff) 1 100%;border-image-slice:1;}}</style><a class="navbar-menu-link  css-a3e3m7">Portfolio<!-- --> 📄</a></li><li class="navbar-menu true css-19x6ejr"><a class="navbar-menu-link  css-a3e3m7">About<!-- --> 📄</a></li><li class="navbar-menu css-nvv0w9"></li></ul></div></div></nav></header><style data-emotion="css 1ho3vgx">.css-1ho3vgx{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}.css-1ho3vgx .main-area{-webkit-flex:none;-ms-flex:none;flex:none;margin:16px 0;width:100%;}@media(min-width: 1024px){.css-1ho3vgx .main-area{width:1000px;margin:16px 12px;}}</style><div class="css-1ho3vgx"><style data-emotion="css 1hten03">.css-1hten03{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;height:100%;width:8px;}</style><div class="css-1hten03"></div><main class="main-area"><style data-emotion="css 2pdmeq">.css-2pdmeq{border:0;margin:-16px 0;}@media(min-width: 1024px){.css-2pdmeq{border-left:1px solid #0C8346;border-right:1px solid #0C8346;margin-left:0;margin-right:0;}}.css-2pdmeq .markdown-body{padding:12px 20px;}@media(min-width: 1024px){.css-2pdmeq .markdown-body{padding-left:16px;padding-right:16px;}}.css-2pdmeq .markdown-body>pre{padding:0;background:none!important;}.css-2pdmeq .markdown-body pre:has(pre){padding:0;background:none;}.css-2pdmeq .markdown-body img{display:block;margin:1rem auto;}.css-2pdmeq .end-of-post{color:#329F5B;padding:8px 8px0 8px;}@media(min-width: 1024px){.css-2pdmeq .end-of-post{padding-left:0;padding-right:0;}}</style><div class="css-2pdmeq"><style data-emotion="css ao9izc">.css-ao9izc{border-bottom:1px solid #0C8346;padding:8px;}.css-ao9izc h1{color:#333;padding-bottom:4px;}.css-ao9izc div{color:#aaa;font-size:14px;}</style><header class="css-ao9izc"><h1>로컬에서 minikube로 k8s 맛보기</h1><div>2024-10-23</div></header><style data-emotion="css r0tt3h">.css-r0tt3h{padding:8px;}.css-r0tt3h div{font-size:14px;}.css-r0tt3h a:hover{color:#8FD5A6;}</style><div class="css-r0tt3h"><div>📂 <span><a href="/blog/category/infra">infra</a></span><span><span> &gt; </span><a href="/blog/category/kubernetes">kubernetes</a></span></div><div>🧶<span><span> </span><a href="/blog/tag/devops">#<!-- -->devops</a></span><span><span> </span><a href="/blog/tag/k8s">#<!-- -->k8s</a></span><span><span> </span><a href="/blog/tag/ingress">#<!-- -->ingress</a></span></div></div><main class="markdown-body"><h3>학습 배경</h3>
<ul>
<li>이미 회사 개발 환경은 k8s로 돌아가고 있지만 사용만 하고 자세하게는 몰라서 로컬에서 간단한 모델을 구현해보기로함</li>
<li>로컬에서 url path로 로드밸런싱 하는 ingress 구조</li>
</ul>
<hr/>
<h2>미리 준비할 것</h2>
<h3>1. linux 운영체제 환경</h3>
<p>현재 회사에서 Azure 사용 중이라 azure vm 을 사용했다</p>
<ul>
<li>Ubuntu Server 24.04 LTS x64</li>
<li>머신은 Standard B2s 사용 : 2 vcpu, 4GiB 메모리<!-- -->
<ul>
<li>minikube 사용을 위해 2 pcu, 2GB 를 선택했다 (<a href="https://minikube.sigs.k8s.io/docs/start/?arch=%2Fwindows%2Fx86-64%2Fstable%2F.exe+download">minikube 공식문서</a>)</li>
</ul>
</li>
</ul>
<h3>2. 간단한 Spring Boot application</h3>
<pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-java" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">1</span><span class="token annotation" style="color:#999">@RestController</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">2</span><span></span><span class="token annotation" style="color:#999">@Slf4j</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">3</span><span></span><span class="token" style="color:#07a">public</span><span> </span><span class="token" style="color:#07a">class</span><span> </span><span class="token" style="color:#DD4A68">KubeController</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">4</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">5</span><span>    </span><span class="token annotation" style="color:#999">@GetMapping</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;/domain&quot;</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">6</span><span>    </span><span class="token" style="color:#07a">public</span><span> </span><span class="token" style="color:#DD4A68">String</span><span> </span><span class="token" style="color:#DD4A68">domain</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">7</span><span>        log</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">info</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;===== domain service =====&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">8</span><span>        log</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">info</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">9</span><span>        log</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">info</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">10</span><span>        log</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">info</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;==========================&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">11</span><span>        </span><span class="token" style="color:#07a">return</span><span> </span><span class="token" style="color:#690">&quot;domain&quot;</span><span class="token" style="color:#999">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">12</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">13</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">14</span><span>    </span><span class="token annotation" style="color:#999">@GetMapping</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;/non-domain&quot;</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">15</span><span>    </span><span class="token" style="color:#07a">public</span><span> </span><span class="token" style="color:#DD4A68">String</span><span> </span><span class="token" style="color:#DD4A68">nonDomain</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">16</span><span>        log</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">info</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;===== non domain =====&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">17</span><span>        log</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">info</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;        BLANK&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">18</span><span>        log</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">info</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;======================&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">19</span><span>        </span><span class="token" style="color:#07a">return</span><span> </span><span class="token" style="color:#690">&quot;non domain&quot;</span><span class="token" style="color:#999">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">20</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">21</span><span></span><span class="token" style="color:#999">}</span></code></pre></pre>
<p><code>bootJar</code> 실행해서 jar 파일 생성해둠</p>
<h3>3. Docker image 준비</h3>
<ul>
<li>Dockerfile</li>
</ul>
<pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-Docker" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">1</span><span>FROM openjdk:17-jdk-alpine
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">2</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">3</span>WORKDIR /app
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">4</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">5</span>COPY target/spring-app.jar /app/spring-app.jar
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">6</span># target/ 디렉토리에 있는 Spring Boot JAR 파일을 Docker 컨테이너의 /app 디렉토리에 복사
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">7</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">8</span>EXPOSE 8080
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">9</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">10</span>ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;spring-app.jar&quot;]</code></pre></pre>
<ul>
<li>image build</li>
</ul>
<pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-bash" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">1</span><span>C:</span><span class="token" style="color:#999">\</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#DD4A68">docker</span><span> build -t spring-app </span><span class="token" style="color:#DD4A68">.</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">2</span><span></span><span class="token" style="color:slategray"># 현재 디렉토리 (.)에 있는 Dockerfile로 spring-app 이미지 생성</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">3</span><span></span><span class="token" style="color:slategray"># docker images로 생성된 이미지 확인 가능</span></code></pre></pre>
<ul>
<li>docker hub로 업로드</li>
</ul>
<pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-bash" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">1</span><span class="token" style="color:#DD4A68">docker</span><span> login -u username
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">2</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">3</span><span></span><span class="token" style="color:#DD4A68">docker</span><span> tag spring-app </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>username</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>/spring-app
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">4</span><span></span><span class="token" style="color:#DD4A68">docker</span><span> push </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>username</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>/spring-app</span></code></pre></pre>
<h2>필요한 프로그램 설치</h2>
<h3>1. docker</h3>
<pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-bash" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">1</span><span class="token" style="color:slategray"># 필요한 패키지 설치</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">2</span><span>azureuser@m3rri17:~$ </span><span class="token" style="color:#DD4A68">sudo</span><span> </span><span class="token" style="color:#DD4A68">apt-get</span><span> </span><span class="token" style="color:#DD4A68">install</span><span> apt-transport-https ca-certificates </span><span class="token" style="color:#DD4A68">curl</span><span> gnupg-agent software-properties-common
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">3</span><span></span><span class="token" style="color:slategray"># docker 공식 gpg 키 추가</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">4</span><span>azureuser@m3rri17:~$ </span><span class="token" style="color:#DD4A68">curl</span><span> -fsSL https://download.docker.com/linux/ubuntu/gpg </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#DD4A68">sudo</span><span> apt-key </span><span class="token" style="color:#DD4A68">add</span><span> -
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">5</span><span></span><span class="token" style="color:slategray"># docker 공식 apt 저장소 추가</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">6</span><span>azureuser@m3rri17:~$ </span><span class="token" style="color:#DD4A68">sudo</span><span> add-apt-repository </span><span class="token" style="color:#690">&quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu </span><span class="token" style="color:#e90">$(</span><span class="token" style="color:#e90">lsb_release -cs</span><span class="token" style="color:#e90">)</span><span class="token" style="color:#690"> stable&quot;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">7</span><span></span><span class="token" style="color:slategray"># docker 설치</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">8</span><span>azureuser@m3rri17:~$ </span><span class="token" style="color:#DD4A68">sudo</span><span> </span><span class="token" style="color:#DD4A68">apt-get</span><span> </span><span class="token" style="color:#DD4A68">install</span><span> docker-ce docker-ce-cli containerd.io</span></code></pre></pre>
<p>minikube driver를 docker로 사용하기 위해서는 아래 명령어를 추가로 실행해줘야 한다</p>
<pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-bash" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">1</span><span>azureuser@m3rri17:~$ </span><span class="token" style="color:#DD4A68">sudo</span><span> </span><span class="token" style="color:#DD4A68">usermod</span><span> -aG </span><span class="token" style="color:#DD4A68">docker</span><span> </span><span class="token environment" style="color:#905">$USER</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;&amp;</span><span> newgrp </span><span class="token" style="color:#DD4A68">docker</span></code></pre></pre>
<p>⚠위 명령을 실행하지 않고 minikube를 시작하려고 할 때 발생하는 에러</p>
<pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-bash" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">1</span><span>azureuser@m3rri17:~$ minikube start --driver</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span>docker --memory </span><span class="token" style="color:#905">200</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">2</span><span>😄  minikube v1.34.0 on Ubuntu </span><span class="token" style="color:#905">24.04</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">3</span><span>✨  Using the </span><span class="token" style="color:#DD4A68">docker</span><span> driver based on user configuration
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">4</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">5</span><span>💣  Exiting due to PROVIDER_DOCKER_NEWGRP: </span><span class="token" style="color:#690">&quot;docker version --format &lt;no value&gt;-&lt;no value&gt;:&lt;no value&gt;&quot;</span><span> </span><span class="token" style="color:#DD4A68">exit</span><span> status </span><span class="token" style="color:#905">1</span><span>: permission denied </span><span class="token" style="color:#07a">while</span><span> trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get </span><span class="token" style="color:#690">&quot;http://%2Fvar%2Frun%2Fdocker.sock/v1.47/version&quot;</span><span class="token" style="color:#DD4A68">:</span><span> dial unix /var/run/docker.sock: connect: permission denied
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">6</span><span>💡  Suggestion: Add your user to the </span><span class="token" style="color:#690">&#x27;docker&#x27;</span><span> group: </span><span class="token" style="color:#690">&#x27;sudo usermod -aG docker $USER &amp;&amp; newgrp docker&#x27;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">7</span>📘  Documentation: https://docs.docker.com/engine/install/linux-postinstall/</code></pre></pre>
<p><code>💡  Suggestion</code> 부분의 명령어를 실행</p>
<h3>2. minikube</h3>
<pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-bash" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">1</span><span>azureuser@m3rri17:~$ </span><span class="token" style="color:#DD4A68">curl</span><span> -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">2</span><span>azureuser@m3rri17:~$ </span><span class="token" style="color:#DD4A68">sudo</span><span> </span><span class="token" style="color:#DD4A68">install</span><span> minikube-linux-amd64 /usr/local/bin/minikube </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;&amp;</span><span> </span><span class="token" style="color:#DD4A68">rm</span><span> minikube-linux-amd64</span></code></pre></pre>
<p>출처 : <a href="https://minikube.sigs.k8s.io/docs/start/?arch=%2Fwindows%2Fx86-64%2Fstable%2F.exe+download">minikube 공식문서</a></p>
<h3>3. kubectl</h3>
<pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-bash" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">1</span><span class="token" style="color:slategray"># download the lastes release</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">2</span><span>azureuser@m3rri17:~$ </span><span class="token" style="color:#DD4A68">curl</span><span> -LO &quot;https://dl.k8s.io/release/</span><span class="token" style="color:#e90">$(</span><span class="token" style="color:#DD4A68">curl</span><span class="token" style="color:#e90"> -L -s https://dl.k8s.io/release/stable.txt</span><span class="token" style="color:#e90">)</span><span>/bin/linux/amd64/kubectl</span></code></pre></pre>
<pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-bash" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">1</span><span class="token" style="color:slategray"># install kubectl</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">2</span><span>azureuser@m3rri17:~$ </span><span class="token" style="color:#DD4A68">sudo</span><span> </span><span class="token" style="color:#DD4A68">install</span><span> -o root -g root -m 0755 kubectl /usr/local/bin/kubectl
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">3</span><span></span><span class="token" style="color:slategray"># version check</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">4</span>azureuser@m3rri17:~$ kubectl version --client</code></pre></pre>
<p>출처 : <a href="https://kubernetes.io/ko/docs/tasks/tools/install-kubectl-linux/">kubernetes 공식문서</a></p>
<h3>4. ingress-controller</h3>
<pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-bash" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">1</span><span>azureuser@m3rri17:~$ minikube addons </span><span class="token" style="color:#DD4A68">enable</span><span> ingress
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">2</span>💡  ingress is an addon maintained by Kubernetes. For any concerns contact minikube on GitHub.
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">3</span>You can view the list of minikube maintainers at: https://github.com/kubernetes/minikube/blob/master/OWNERS
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">4</span>    ▪ Using image registry.k8s.io/ingress-nginx/controller:v1.11.2
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">5</span>    ▪ Using image registry.k8s.io/ingress-nginx/kube-webhook-certgen:v1.4.3
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">6</span>    ▪ Using image registry.k8s.io/ingress-nginx/kube-webhook-certgen:v1.4.3
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">7</span><span>🔎  Verifying ingress addon</span><span class="token" style="color:#999">..</span><span>.
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">8</span><span>🌟  The </span><span class="token" style="color:#690">&#x27;ingress&#x27;</span><span> addon is enabled
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">9</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">10</span>azureuser@m3rri17:~$ kubectl get all -n ingress-nginx
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">11</span>NAME                                           READY   STATUS      RESTARTS   AGE
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">12</span><span>pod/ingress-nginx-admission-create-p7mcn       </span><span class="token" style="color:#905">0</span><span>/1     Completed   </span><span class="token" style="color:#905">0</span><span>          89s
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">13</span><span>pod/ingress-nginx-admission-patch-p5bf4        </span><span class="token" style="color:#905">0</span><span>/1     Completed   </span><span class="token" style="color:#905">1</span><span>          89s
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">14</span><span>pod/ingress-nginx-controller-bc57996ff-p9488   </span><span class="token" style="color:#905">1</span><span>/1     Running     </span><span class="token" style="color:#905">0</span><span>          89s
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">15</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">16</span><span>NAME                                         TYPE        CLUSTER-IP       EXTERNAL-IP   PORT</span><span class="token" style="color:#999">(</span><span>S</span><span class="token" style="color:#999">)</span><span>                      AGE
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">17</span><span>service/ingress-nginx-controller             NodePort    </span><span class="token" style="color:#905">10.107</span><span>.25.163    </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>none</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>        </span><span class="token" style="color:#905">80</span><span>:31473/TCP,443:30846/TCP   89s
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">18</span><span>service/ingress-nginx-controller-admission   ClusterIP   </span><span class="token" style="color:#905">10.101</span><span>.131.201   </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>none</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>        </span><span class="token" style="color:#905">443</span><span>/TCP                      89s
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">19</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">20</span>NAME                                       READY   UP-TO-DATE   AVAILABLE   AGE
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">21</span><span>deployment.apps/ingress-nginx-controller   </span><span class="token" style="color:#905">1</span><span>/1     </span><span class="token" style="color:#905">1</span><span>            </span><span class="token" style="color:#905">1</span><span>           89s
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">22</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">23</span>NAME                                                 DESIRED   CURRENT   READY   AGE
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">24</span><span>replicaset.apps/ingress-nginx-controller-bc57996ff   </span><span class="token" style="color:#905">1</span><span>         </span><span class="token" style="color:#905">1</span><span>         </span><span class="token" style="color:#905">1</span><span>       89s
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">25</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">26</span>NAME                                       STATUS     COMPLETIONS   DURATION   AGE
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">27</span><span>job.batch/ingress-nginx-admission-create   Complete   </span><span class="token" style="color:#905">1</span><span>/1           8s         89s
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">28</span><span>job.batch/ingress-nginx-admission-patch    Complete   </span><span class="token" style="color:#905">1</span><span>/1           9s         89s</span></code></pre></pre>
<h2>k8s 구동</h2>
<h3>1. minikube 시작</h3>
<pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-bash" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">1</span><span>azureuser@m3rri17:~$ minikube start --driver</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span>docker --memory </span><span class="token" style="color:#905">2048</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">2</span><span></span><span class="token" style="color:slategray"># --driver=docker : driver 겹쳐서 에러발생하는 경우 사용</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">3</span><span></span><span class="token" style="color:slategray"># --memory 2048 : ram 에 여유가 없어서 따로 지정함</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">4</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">5</span>azureuser@m3rri17:~$ minikube status
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">6</span><span></span><span class="token" style="color:slategray"># 아래와 같이 나오면 정상</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">7</span>minikube
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">8</span>type: Control Plane
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">9</span>host: Running
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">10</span>kubelet: Running
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">11</span>apiserver: Running
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">12</span>kubeconfig: Configured
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">13</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">14</span><span>azureuser@m3rri17:~$ minikube </span><span class="token" style="color:#DD4A68">ip</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">15</span><span></span><span class="token" style="color:slategray"># ip 확인하여 이후 Ingress 파일 작성 단계에서 사용</span></code></pre></pre>
<h3>2. Deployment</h3>
<ul>
<li>file 생성<!-- -->
<ul>
<li>spring-deployment-1.yaml<!-- -->
<pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-yaml" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">1</span><span class="token key" style="color:#07a">apiVersion</span><span class="token" style="color:#999">:</span><span> apps/v1
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">2</span><span></span><span class="token key" style="color:#07a">kind</span><span class="token" style="color:#999">:</span><span> Deployment
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">3</span><span></span><span class="token key" style="color:#07a">metadata</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">4</span><span>    </span><span class="token key" style="color:#07a">name</span><span class="token" style="color:#999">:</span><span> spring</span><span class="token" style="color:#999">-</span><span>boot</span><span class="token" style="color:#999">-</span><span>deployment</span><span class="token" style="color:#999">-</span><span class="token" style="color:#905">1</span><span> </span><span class="token" style="color:slategray"># deployment의 이름</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">5</span><span></span><span class="token key" style="color:#07a">spec</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">6</span><span>    </span><span class="token key" style="color:#07a">replicas</span><span class="token" style="color:#999">:</span><span> </span><span class="token" style="color:#905">1</span><span> </span><span class="token" style="color:slategray"># 생성할 pod 수</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">7</span><span>    </span><span class="token key" style="color:#07a">selector</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">8</span><span>        </span><span class="token key" style="color:#07a">matchLabels</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">9</span><span>            </span><span class="token key" style="color:#07a">app</span><span class="token" style="color:#999">:</span><span> spring</span><span class="token" style="color:#999">-</span><span>boot</span><span class="token" style="color:#999">-</span><span>app</span><span class="token" style="color:#999">-</span><span class="token" style="color:#905">1</span><span> </span><span class="token" style="color:slategray"># app 이름 service 파일의 spec.selector.app 에서 동일한 이름 사용하면 매핑됨</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">10</span><span>    </span><span class="token key" style="color:#07a">template</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">11</span><span>        </span><span class="token key" style="color:#07a">metadata</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">12</span><span>            </span><span class="token key" style="color:#07a">labels</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">13</span><span>                </span><span class="token key" style="color:#07a">app</span><span class="token" style="color:#999">:</span><span> spring</span><span class="token" style="color:#999">-</span><span>boot</span><span class="token" style="color:#999">-</span><span>app</span><span class="token" style="color:#999">-</span><span class="token" style="color:#905">1</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">14</span><span>        </span><span class="token key" style="color:#07a">spec</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">15</span><span>            </span><span class="token key" style="color:#07a">containers</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">16</span><span>                </span><span class="token" style="color:#999">-</span><span> </span><span class="token key" style="color:#07a">name</span><span class="token" style="color:#999">:</span><span> spring</span><span class="token" style="color:#999">-</span><span>boot</span><span class="token" style="color:#999">-</span><span>container</span><span class="token" style="color:#999">-</span><span class="token" style="color:#905">1</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">17</span><span>                  </span><span class="token key" style="color:#07a">image</span><span class="token" style="color:#999">:</span><span> &lt;dockerhub</span><span class="token" style="color:#999">-</span><span>username</span><span class="token" style="color:#999">&gt;</span><span>/spring</span><span class="token" style="color:#999">-</span><span>app </span><span class="token" style="color:slategray"># Docker Hub에서 가져올 이미지</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">18</span><span>                  </span><span class="token key" style="color:#07a">ports</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">19</span><span>                      </span><span class="token" style="color:#999">-</span><span> </span><span class="token key" style="color:#07a">containerPort</span><span class="token" style="color:#999">:</span><span> </span><span class="token" style="color:#905">8080</span><span> </span><span class="token" style="color:slategray"># Spring Boot 기본 포트</span></code></pre></pre>
</li>
<li>spring-deployment-2.yaml<!-- -->
<pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-yaml" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">1</span><span class="token key" style="color:#07a">apiVersion</span><span class="token" style="color:#999">:</span><span> apps/v1
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">2</span><span></span><span class="token key" style="color:#07a">kind</span><span class="token" style="color:#999">:</span><span> Deployment
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">3</span><span></span><span class="token key" style="color:#07a">metadata</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">4</span><span>    </span><span class="token key" style="color:#07a">name</span><span class="token" style="color:#999">:</span><span> spring</span><span class="token" style="color:#999">-</span><span>boot</span><span class="token" style="color:#999">-</span><span>app</span><span class="token" style="color:#999">-</span><span class="token" style="color:#905">2</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">5</span><span></span><span class="token key" style="color:#07a">spec</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">6</span><span>    </span><span class="token key" style="color:#07a">replicas</span><span class="token" style="color:#999">:</span><span> </span><span class="token" style="color:#905">1</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">7</span><span>    </span><span class="token key" style="color:#07a">selector</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">8</span><span>        </span><span class="token key" style="color:#07a">matchLabels</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">9</span><span>            </span><span class="token key" style="color:#07a">app</span><span class="token" style="color:#999">:</span><span> spring</span><span class="token" style="color:#999">-</span><span>boot</span><span class="token" style="color:#999">-</span><span>app</span><span class="token" style="color:#999">-</span><span class="token" style="color:#905">2</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">10</span><span>    </span><span class="token key" style="color:#07a">template</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">11</span><span>        </span><span class="token key" style="color:#07a">metadata</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">12</span><span>            </span><span class="token key" style="color:#07a">labels</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">13</span><span>                </span><span class="token key" style="color:#07a">app</span><span class="token" style="color:#999">:</span><span> spring</span><span class="token" style="color:#999">-</span><span>boot</span><span class="token" style="color:#999">-</span><span>app</span><span class="token" style="color:#999">-</span><span class="token" style="color:#905">2</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">14</span><span>        </span><span class="token key" style="color:#07a">spec</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">15</span><span>            </span><span class="token key" style="color:#07a">containers</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">16</span><span>                </span><span class="token" style="color:#999">-</span><span> </span><span class="token key" style="color:#07a">name</span><span class="token" style="color:#999">:</span><span> spring</span><span class="token" style="color:#999">-</span><span>boot</span><span class="token" style="color:#999">-</span><span>container</span><span class="token" style="color:#999">-</span><span class="token" style="color:#905">2</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">17</span><span>                  </span><span class="token key" style="color:#07a">image</span><span class="token" style="color:#999">:</span><span> &lt;dockerhub</span><span class="token" style="color:#999">-</span><span>username</span><span class="token" style="color:#999">&gt;</span><span>/spring</span><span class="token" style="color:#999">-</span><span>app
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">18</span><span>                  </span><span class="token key" style="color:#07a">ports</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">19</span><span>                      </span><span class="token" style="color:#999">-</span><span> </span><span class="token key" style="color:#07a">containerPort</span><span class="token" style="color:#999">:</span><span> </span><span class="token" style="color:#905">8080</span></code></pre></pre>
</li>
</ul>
</li>
<li>클러스터에 적용</li>
</ul>
<pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-bash" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">1</span><span>azureuser@m3rri17:~$ kubectl apply -f spring-deployment-1.yaml
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">2</span>azureuser@m3rri17:~$ kubectl apply -f spring-deployment-2.yaml
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">3</span><span>azureuser@m3rri17:~$ kubectl get pods </span><span class="token" style="color:slategray"># pod name 확인</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">4</span>NAME                                        READY   STATUS    RESTARTS   AGE
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">5</span><span>spring-boot-deployment-1-5b4b9d89f8-2sjcq   </span><span class="token" style="color:#905">1</span><span>/1     Running   </span><span class="token" style="color:#905">0</span><span>          21s
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">6</span><span>spring-boot-deployment-2-cd877558-jqw4x     </span><span class="token" style="color:#905">1</span><span>/1     Running   </span><span class="token" style="color:#905">0</span><span>          7s
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">7</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">8</span><span>azureuser@m3rri17:~$ kubectl logs </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>pod-name</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:slategray"># -f는 실시간 로그 확인 결과는 아래 다시 정리</span></code></pre></pre>
<h3>3. Service</h3>
<ul>
<li>file 생성<!-- -->
<ul>
<li>spring-service-1.yaml<!-- -->
<pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-yaml" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">1</span><span class="token key" style="color:#07a">apiVersion</span><span class="token" style="color:#999">:</span><span> v1
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">2</span><span></span><span class="token key" style="color:#07a">kind</span><span class="token" style="color:#999">:</span><span> Service
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">3</span><span></span><span class="token key" style="color:#07a">metadata</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">4</span><span>    </span><span class="token key" style="color:#07a">name</span><span class="token" style="color:#999">:</span><span> spring</span><span class="token" style="color:#999">-</span><span>boot</span><span class="token" style="color:#999">-</span><span>service</span><span class="token" style="color:#999">-</span><span class="token" style="color:#905">1</span><span> </span><span class="token" style="color:slategray"># service 이름. ingress 파일의 spec.rules.http.paths.backend.service.name에 동일하게 사용하여 매핑</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">5</span><span></span><span class="token key" style="color:#07a">spec</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">6</span><span>    </span><span class="token key" style="color:#07a">selector</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">7</span><span>        </span><span class="token key" style="color:#07a">app</span><span class="token" style="color:#999">:</span><span> spring</span><span class="token" style="color:#999">-</span><span>boot</span><span class="token" style="color:#999">-</span><span>app</span><span class="token" style="color:#999">-</span><span class="token" style="color:#905">1</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">8</span><span>    </span><span class="token key" style="color:#07a">ports</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">9</span><span>        </span><span class="token" style="color:#999">-</span><span> </span><span class="token key" style="color:#07a">protocol</span><span class="token" style="color:#999">:</span><span> TCP
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">10</span><span>          </span><span class="token key" style="color:#07a">port</span><span class="token" style="color:#999">:</span><span> </span><span class="token" style="color:#905">80</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">11</span><span>          </span><span class="token key" style="color:#07a">targetPort</span><span class="token" style="color:#999">:</span><span> </span><span class="token" style="color:#905">8080</span><span> </span><span class="token" style="color:slategray"># 80포트로 들어온 요청을 8080 포트로 연결</span></code></pre></pre>
</li>
<li>spring-service-2.yaml<!-- -->
<pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-yaml" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">1</span><span class="token key" style="color:#07a">apiVersion</span><span class="token" style="color:#999">:</span><span> v1
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">2</span><span></span><span class="token key" style="color:#07a">kind</span><span class="token" style="color:#999">:</span><span> Service
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">3</span><span></span><span class="token key" style="color:#07a">metadata</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">4</span><span>    </span><span class="token key" style="color:#07a">name</span><span class="token" style="color:#999">:</span><span> spring</span><span class="token" style="color:#999">-</span><span>boot</span><span class="token" style="color:#999">-</span><span>service</span><span class="token" style="color:#999">-</span><span class="token" style="color:#905">2</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">5</span><span></span><span class="token key" style="color:#07a">spec</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">6</span><span>    </span><span class="token key" style="color:#07a">selector</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">7</span><span>        </span><span class="token key" style="color:#07a">app</span><span class="token" style="color:#999">:</span><span> spring</span><span class="token" style="color:#999">-</span><span>boot</span><span class="token" style="color:#999">-</span><span>app</span><span class="token" style="color:#999">-</span><span class="token" style="color:#905">2</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">8</span><span>    </span><span class="token key" style="color:#07a">ports</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">9</span><span>        </span><span class="token" style="color:#999">-</span><span> </span><span class="token key" style="color:#07a">protocol</span><span class="token" style="color:#999">:</span><span> TCP
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">10</span><span>          </span><span class="token key" style="color:#07a">port</span><span class="token" style="color:#999">:</span><span> </span><span class="token" style="color:#905">80</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">11</span><span>          </span><span class="token key" style="color:#07a">targetPort</span><span class="token" style="color:#999">:</span><span> </span><span class="token" style="color:#905">8080</span></code></pre></pre>
</li>
</ul>
</li>
<li>클러스터에 적용</li>
</ul>
<pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-bash" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">1</span><span>azureuser@m3rri17:~$ kubectl apply -f spring-service-1.yaml
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">2</span>azureuser@m3rri17:~$ kubectl apply -f spring-service-2.yaml
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">3</span>azureuser@m3rri17:~$ kubectl get svc
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">4</span><span>NAME                    TYPE        CLUSTER-IP     EXTERNAL-IP   PORT</span><span class="token" style="color:#999">(</span><span>S</span><span class="token" style="color:#999">)</span><span>        AGE
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">5</span><span>kubernetes              ClusterIP   </span><span class="token" style="color:#905">10.96</span><span>.0.1      </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>none</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>        </span><span class="token" style="color:#905">443</span><span>/TCP        6m14s
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">6</span><span>spring-boot-service-1   NodePort    </span><span class="token" style="color:#905">10.98</span><span>.26.57    </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>none</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>        </span><span class="token" style="color:#905">80</span><span>:32309/TCP   7s
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">7</span><span>spring-boot-service-2   NodePort    </span><span class="token" style="color:#905">10.99</span><span>.23.101   </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>none</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>        </span><span class="token" style="color:#905">80</span><span>:32206/TCP   3s</span></code></pre></pre>
<h3>4. Ingress</h3>
<ul>
<li>file 생성
ingress.yaml<!-- -->
<pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-yaml" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">1</span><span class="token key" style="color:#07a">apiVersion</span><span class="token" style="color:#999">:</span><span> networking.k8s.io/v1
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">2</span><span></span><span class="token key" style="color:#07a">kind</span><span class="token" style="color:#999">:</span><span> Ingress
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">3</span><span></span><span class="token key" style="color:#07a">metadata</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">4</span><span>    </span><span class="token key" style="color:#07a">name</span><span class="token" style="color:#999">:</span><span> spring</span><span class="token" style="color:#999">-</span><span>boot</span><span class="token" style="color:#999">-</span><span>ingress
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">5</span><span>    </span><span class="token key" style="color:#07a">annotations</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">6</span><span>        </span><span class="token key" style="color:#07a">nginx.ingress.kubernetes.io/rewrite-target</span><span class="token" style="color:#999">:</span><span> /
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">7</span><span></span><span class="token key" style="color:#07a">spec</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">8</span><span>    </span><span class="token key" style="color:#07a">rules</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">9</span><span>        </span><span class="token" style="color:#999">-</span><span> </span><span class="token key" style="color:#07a">host</span><span class="token" style="color:#999">:</span><span> </span><span class="token" style="color:#690">&quot;&lt;minikube-ip&gt;.nip.io&quot;</span><span> </span><span class="token" style="color:slategray"># 또는 도메인 이름</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">10</span><span>          </span><span class="token key" style="color:#07a">http</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">11</span><span>              </span><span class="token key" style="color:#07a">paths</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">12</span><span>                  </span><span class="token" style="color:#999">-</span><span> </span><span class="token key" style="color:#07a">path</span><span class="token" style="color:#999">:</span><span> /domain
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">13</span><span>                    </span><span class="token key" style="color:#07a">pathType</span><span class="token" style="color:#999">:</span><span> Prefix
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">14</span><span>                    </span><span class="token key" style="color:#07a">backend</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">15</span><span>                        </span><span class="token key" style="color:#07a">service</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">16</span><span>                            </span><span class="token key" style="color:#07a">name</span><span class="token" style="color:#999">:</span><span> spring</span><span class="token" style="color:#999">-</span><span>boot</span><span class="token" style="color:#999">-</span><span>service</span><span class="token" style="color:#999">-</span><span class="token" style="color:#905">1</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">17</span><span>                            </span><span class="token key" style="color:#07a">port</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">18</span><span>                                </span><span class="token key" style="color:#07a">number</span><span class="token" style="color:#999">:</span><span> </span><span class="token" style="color:#905">80</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">19</span><span>                  </span><span class="token" style="color:#999">-</span><span> </span><span class="token key" style="color:#07a">path</span><span class="token" style="color:#999">:</span><span> /non</span><span class="token" style="color:#999">-</span><span>domain
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">20</span><span>                    </span><span class="token key" style="color:#07a">pathType</span><span class="token" style="color:#999">:</span><span> Prefix
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">21</span><span>                    </span><span class="token key" style="color:#07a">backend</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">22</span><span>                        </span><span class="token key" style="color:#07a">service</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">23</span><span>                            </span><span class="token key" style="color:#07a">name</span><span class="token" style="color:#999">:</span><span> spring</span><span class="token" style="color:#999">-</span><span>boot</span><span class="token" style="color:#999">-</span><span>service</span><span class="token" style="color:#999">-</span><span class="token" style="color:#905">2</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">24</span><span>                            </span><span class="token key" style="color:#07a">port</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">25</span><span>                                </span><span class="token key" style="color:#07a">number</span><span class="token" style="color:#999">:</span><span> </span><span class="token" style="color:#905">80</span></code></pre></pre>
</li>
<li>클러스터에 적용</li>
</ul>
<pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-bash" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">1</span><span>azureuser@m3rri17:~$ kubectl apply -f ingress.yaml
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">2</span>azureuser@m3rri17:~$ kubectl get all -n ingress-nginx
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">3</span>NAME                                           READY   STATUS      RESTARTS   AGE
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">4</span><span>pod/ingress-nginx-admission-create-p7mcn       </span><span class="token" style="color:#905">0</span><span>/1     Completed   </span><span class="token" style="color:#905">0</span><span>          9m51s
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">5</span><span>pod/ingress-nginx-admission-patch-p5bf4        </span><span class="token" style="color:#905">0</span><span>/1     Completed   </span><span class="token" style="color:#905">1</span><span>          9m51s
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">6</span><span>pod/ingress-nginx-controller-bc57996ff-p9488   </span><span class="token" style="color:#905">1</span><span>/1     Running     </span><span class="token" style="color:#905">0</span><span>          9m51s
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">7</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">8</span><span>NAME                                         TYPE        CLUSTER-IP       EXTERNAL-IP   PORT</span><span class="token" style="color:#999">(</span><span>S</span><span class="token" style="color:#999">)</span><span>                      AGE
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">9</span><span>service/ingress-nginx-controller             NodePort    </span><span class="token" style="color:#905">10.107</span><span>.25.163    </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>none</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>        </span><span class="token" style="color:#905">80</span><span>:31473/TCP,443:30846/TCP   9m51s
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">10</span><span>service/ingress-nginx-controller-admission   ClusterIP   </span><span class="token" style="color:#905">10.101</span><span>.131.201   </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>none</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>        </span><span class="token" style="color:#905">443</span><span>/TCP                      9m51s
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">11</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">12</span>NAME                                       READY   UP-TO-DATE   AVAILABLE   AGE
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">13</span><span>deployment.apps/ingress-nginx-controller   </span><span class="token" style="color:#905">1</span><span>/1     </span><span class="token" style="color:#905">1</span><span>            </span><span class="token" style="color:#905">1</span><span>           9m51s
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">14</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">15</span>NAME                                                 DESIRED   CURRENT   READY   AGE
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">16</span><span>replicaset.apps/ingress-nginx-controller-bc57996ff   </span><span class="token" style="color:#905">1</span><span>         </span><span class="token" style="color:#905">1</span><span>         </span><span class="token" style="color:#905">1</span><span>       9m51s
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">17</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">18</span>NAME                                       STATUS     COMPLETIONS   DURATION   AGE
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">19</span><span>job.batch/ingress-nginx-admission-create   Complete   </span><span class="token" style="color:#905">1</span><span>/1           8s         9m51s
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">20</span><span>job.batch/ingress-nginx-admission-patch    Complete   </span><span class="token" style="color:#905">1</span><span>/1           9s         9m51s</span></code></pre></pre>
<h3>5. 테스트 및 로그 확인</h3>
<ul>
<li>/domain</li>
</ul>
<pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-bash" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">1</span><span>azureuser@m3rri17:~$ </span><span class="token" style="color:#DD4A68">curl</span><span> http://192.168.49.2.nip.io:80/domain
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">2</span>domain
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">3</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">4</span>azureuser@m3rri17:~$ kubectl logs spring-boot-deployment-1-5b4b9d89f8-2sjcq
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">5</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">6</span><span>  </span><span class="token" style="color:#DD4A68">.</span><span>   ____          _            __ _ _
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">7</span><span> /</span><span class="token" style="color:#999">\</span><span class="token" style="color:#999">\</span><span> / ___</span><span class="token" style="color:#690">&#x27;_ __ _ _(_)_ __  __ _ \ \ \ \
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">8</span><span class="token" style="color:#690">( ( )\___ | &#x27;</span><span>_ </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#690">&#x27;_| | &#x27;</span><span>_ </span><span class="token" style="color:#999">\</span><span>/ _` </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#999">\</span><span> </span><span class="token" style="color:#999">\</span><span> </span><span class="token" style="color:#999">\</span><span> </span><span class="token" style="color:#999">\</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">9</span><span> </span><span class="token" style="color:#999">\</span><span class="token" style="color:#999">\</span><span>/  ___</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span>_</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">||</span><span> </span><span class="token" style="color:#999">(</span><span>_</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span>  </span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">10</span><span>  </span><span class="token" style="color:#690">&#x27;  |____| .__|_| |_|_| |_\__, | / / / /
</span><span class="token" style="color:#690"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">11</span> =========|_|==============|___/=/_/_/_/
</span><span class="token" style="color:#690"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">12</span>
</span><span class="token" style="color:#690"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">13</span> :: Spring Boot ::                (v3.3.4)
</span><span class="token" style="color:#690"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">14</span>
</span><span class="token" style="color:#690"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">15</span>2024-10-22T07:15:39.011Z  INFO 1 --- [kubetarget] [           main] c.e.kubetarget.KubetargetApplication     : Starting KubetargetApplication v0.0.1-SNAPSHOT using Java 17-ea with PID 1 (/app/spring-app.jar started by root in /app)
</span><span class="token" style="color:#690"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">16</span>2024-10-22T07:15:39.016Z  INFO 1 --- [kubetarget] [           main] c.e.kubetarget.KubetargetApplication     : No active profile set, falling back to 1 default profile: &quot;default&quot;
</span><span class="token" style="color:#690"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">17</span>2024-10-22T07:15:41.258Z  INFO 1 --- [kubetarget] [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
</span><span class="token" style="color:#690"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">18</span>2024-10-22T07:15:41.297Z  INFO 1 --- [kubetarget] [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
</span><span class="token" style="color:#690"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">19</span>2024-10-22T07:15:41.297Z  INFO 1 --- [kubetarget] [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
</span><span class="token" style="color:#690"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">20</span>2024-10-22T07:15:41.608Z  INFO 1 --- [kubetarget] [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
</span><span class="token" style="color:#690"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">21</span>2024-10-22T07:15:41.614Z  INFO 1 --- [kubetarget] [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2529 ms
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">22</span><span class="token" style="color:#690">2024-10-22T07:15:43.224Z  INFO 1 --- [kubetarget] [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path &#x27;</span><span>/</span><span class="token" style="color:#690">&#x27;
</span><span class="token" style="color:#690"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">23</span>2024-10-22T07:15:43.262Z  INFO 1 --- [kubetarget] [           main] c.e.kubetarget.KubetargetApplication     : Started KubetargetApplication in 4.891 seconds (process running for 5.76)
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">24</span><span class="token" style="color:#690">2024-10-22T07:23:43.510Z  INFO 1 --- [kubetarget] [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet &#x27;</span><span>dispatcherServlet</span><span class="token" style="color:#690">&#x27;
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">25</span><span class="token" style="color:#690">2024-10-22T07:23:43.510Z  INFO 1 --- [kubetarget] [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#x27;</span><span>dispatcherServlet&#x27;
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">26</span><span></span><span class="token" style="color:#905">2024</span><span>-10-22T07:23:43.512Z  INFO </span><span class="token" style="color:#905">1</span><span> --- </span><span class="token" style="color:#999">[</span><span>kubetarget</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#999">[</span><span>nio-8080-exec-1</span><span class="token" style="color:#999">]</span><span> o.s.web.servlet.DispatcherServlet        </span><span class="token" style="color:#DD4A68">:</span><span> Completed initialization </span><span class="token" style="color:#07a">in</span><span> </span><span class="token" style="color:#905">2</span><span> ms
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">27</span><span></span><span class="token" style="color:#905">2024</span><span>-10-22T07:25:43.823Z  INFO </span><span class="token" style="color:#905">1</span><span> --- </span><span class="token" style="color:#999">[</span><span>kubetarget</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#999">[</span><span>nio-8080-exec-5</span><span class="token" style="color:#999">]</span><span> c.e.k.d.controller.DomainController      </span><span class="token" style="color:#DD4A68">:</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> domain </span><span class="token" style="color:#DD4A68">service</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">28</span><span></span><span class="token" style="color:#905">2024</span><span>-10-22T07:25:43.823Z  INFO </span><span class="token" style="color:#905">1</span><span> --- </span><span class="token" style="color:#999">[</span><span>kubetarget</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#999">[</span><span>nio-8080-exec-5</span><span class="token" style="color:#999">]</span><span> c.e.k.d.controller.DomainController      </span><span class="token" style="color:#DD4A68">:</span><span> ABCDEFGHIJKLMNOPQRSTUVWXYZ
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">29</span><span></span><span class="token" style="color:#905">2024</span><span>-10-22T07:25:43.823Z  INFO </span><span class="token" style="color:#905">1</span><span> --- </span><span class="token" style="color:#999">[</span><span>kubetarget</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#999">[</span><span>nio-8080-exec-5</span><span class="token" style="color:#999">]</span><span> c.e.k.d.controller.DomainController      </span><span class="token" style="color:#DD4A68">:</span><span> ABCDEFGHIJKLMNOPQRSTUVWXYZ
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">30</span><span></span><span class="token" style="color:#905">2024</span><span>-10-22T07:25:43.823Z  INFO </span><span class="token" style="color:#905">1</span><span> --- </span><span class="token" style="color:#999">[</span><span>kubetarget</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#999">[</span><span>nio-8080-exec-5</span><span class="token" style="color:#999">]</span><span> c.e.k.d.controller.DomainController      </span><span class="token" style="color:#DD4A68">:</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span></code></pre></pre>
<ul>
<li>/non-domain</li>
</ul>
<pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-bash" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">1</span><span>azureuser@m3rri17:~$ </span><span class="token" style="color:#DD4A68">curl</span><span> http://192.168.49.2.nip.io:80/non-domain
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">2</span>non domain
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">3</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">4</span>azureuser@m3rri17:~$ kubectl logs spring-boot-deployment-2-cd877558-jqw4x
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">5</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">6</span><span>  </span><span class="token" style="color:#DD4A68">.</span><span>   ____          _            __ _ _
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">7</span><span> /</span><span class="token" style="color:#999">\</span><span class="token" style="color:#999">\</span><span> / ___</span><span class="token" style="color:#690">&#x27;_ __ _ _(_)_ __  __ _ \ \ \ \
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">8</span><span class="token" style="color:#690">( ( )\___ | &#x27;</span><span>_ </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#690">&#x27;_| | &#x27;</span><span>_ </span><span class="token" style="color:#999">\</span><span>/ _` </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#999">\</span><span> </span><span class="token" style="color:#999">\</span><span> </span><span class="token" style="color:#999">\</span><span> </span><span class="token" style="color:#999">\</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">9</span><span> </span><span class="token" style="color:#999">\</span><span class="token" style="color:#999">\</span><span>/  ___</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span>_</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">||</span><span> </span><span class="token" style="color:#999">(</span><span>_</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span>  </span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">10</span><span>  </span><span class="token" style="color:#690">&#x27;  |____| .__|_| |_|_| |_\__, | / / / /
</span><span class="token" style="color:#690"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">11</span> =========|_|==============|___/=/_/_/_/
</span><span class="token" style="color:#690"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">12</span>
</span><span class="token" style="color:#690"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">13</span> :: Spring Boot ::                (v3.3.4)
</span><span class="token" style="color:#690"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">14</span>
</span><span class="token" style="color:#690"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">15</span>2024-10-22T07:15:42.639Z  INFO 1 --- [kubetarget] [           main] c.e.kubetarget.KubetargetApplication     : Starting KubetargetApplication v0.0.1-SNAPSHOT using Java 17-ea with PID 1 (/app/spring-app.jar started by root in /app)
</span><span class="token" style="color:#690"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">16</span>2024-10-22T07:15:42.657Z  INFO 1 --- [kubetarget] [           main] c.e.kubetarget.KubetargetApplication     : No active profile set, falling back to 1 default profile: &quot;default&quot;
</span><span class="token" style="color:#690"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">17</span>2024-10-22T07:15:44.533Z  INFO 1 --- [kubetarget] [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
</span><span class="token" style="color:#690"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">18</span>2024-10-22T07:15:44.551Z  INFO 1 --- [kubetarget] [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
</span><span class="token" style="color:#690"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">19</span>2024-10-22T07:15:44.552Z  INFO 1 --- [kubetarget] [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
</span><span class="token" style="color:#690"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">20</span>2024-10-22T07:15:44.697Z  INFO 1 --- [kubetarget] [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
</span><span class="token" style="color:#690"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">21</span>2024-10-22T07:15:44.699Z  INFO 1 --- [kubetarget] [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1821 ms
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">22</span><span class="token" style="color:#690">2024-10-22T07:15:45.653Z  INFO 1 --- [kubetarget] [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path &#x27;</span><span>/</span><span class="token" style="color:#690">&#x27;
</span><span class="token" style="color:#690"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">23</span>2024-10-22T07:15:45.706Z  INFO 1 --- [kubetarget] [           main] c.e.kubetarget.KubetargetApplication     : Started KubetargetApplication in 4.273 seconds (process running for 5.877)
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">24</span><span class="token" style="color:#690">2024-10-22T07:25:51.778Z  INFO 1 --- [kubetarget] [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet &#x27;</span><span>dispatcherServlet</span><span class="token" style="color:#690">&#x27;
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">25</span><span class="token" style="color:#690">2024-10-22T07:25:51.778Z  INFO 1 --- [kubetarget] [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#x27;</span><span>dispatcherServlet&#x27;
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">26</span><span></span><span class="token" style="color:#905">2024</span><span>-10-22T07:25:51.780Z  INFO </span><span class="token" style="color:#905">1</span><span> --- </span><span class="token" style="color:#999">[</span><span>kubetarget</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#999">[</span><span>nio-8080-exec-1</span><span class="token" style="color:#999">]</span><span> o.s.web.servlet.DispatcherServlet        </span><span class="token" style="color:#DD4A68">:</span><span> Completed initialization </span><span class="token" style="color:#07a">in</span><span> </span><span class="token" style="color:#905">1</span><span> ms
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">27</span><span></span><span class="token" style="color:#905">2024</span><span>-10-22T07:25:51.822Z  INFO </span><span class="token" style="color:#905">1</span><span> --- </span><span class="token" style="color:#999">[</span><span>kubetarget</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#999">[</span><span>nio-8080-exec-1</span><span class="token" style="color:#999">]</span><span> c.e.k.d.controller.DomainController      </span><span class="token" style="color:#DD4A68">:</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> non domain </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">28</span><span></span><span class="token" style="color:#905">2024</span><span>-10-22T07:25:51.822Z  INFO </span><span class="token" style="color:#905">1</span><span> --- </span><span class="token" style="color:#999">[</span><span>kubetarget</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#999">[</span><span>nio-8080-exec-1</span><span class="token" style="color:#999">]</span><span> c.e.k.d.controller.DomainController      </span><span class="token" style="color:#DD4A68">:</span><span>         BLANK
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">29</span><span></span><span class="token" style="color:#905">2024</span><span>-10-22T07:25:51.822Z  INFO </span><span class="token" style="color:#905">1</span><span> --- </span><span class="token" style="color:#999">[</span><span>kubetarget</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#999">[</span><span>nio-8080-exec-1</span><span class="token" style="color:#999">]</span><span> c.e.k.d.controller.DomainController      </span><span class="token" style="color:#DD4A68">:</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">==</span></code></pre></pre>
<p>path에 따라 deployment1과 deployment2로 요청이 잘 나뉘어 들어갔다</p></main><div class="end-of-post">/end of <!-- -->로컬에서 minikube로 k8s 맛보기</div><style data-emotion="css 1v142rx">.css-1v142rx{border-top:1px solid #0C8346;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:8px;}@media(min-width: 768px){.css-1v142rx{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}}.css-1v142rx div:first-of-type{-webkit-flex:1 1 0%;-ms-flex:1 1 0%;flex:1 1 0%;}.css-1v142rx div:last-of-type{text-align:right;}</style><footer class="css-1v142rx"><div><style data-emotion="css 173eilp">.css-173eilp{cursor:pointer;padding-left:4px;}.css-173eilp:hover{color:#aaa;}</style><a class="css-173eilp"><style data-emotion="css d5okxo">.css-d5okxo{font-size:0.85rem;}</style><span class="css-d5okxo">(이전글)</span>기초 네트워크[유투브 조코딩 - 꼭 알아야 하는 네트워크 지식...(feat.강민철)</a></div><div><a class="css-173eilp">웹 취약점<span class="css-d5okxo">(다음글)</span></a></div></footer><div style="border-top:1px solid #0C8346;padding:8px"><div style="display:flex;justify-content:space-between"><span style="font-weight:bold">CONTENT LIST</span><span style="color:#8FD5A6;font-weight:bold">MERRI＇s DEVELOG</span></div><div><style data-emotion="css 1ax1d4x">.css-1ax1d4x{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;padding:12px 8px;}.css-1ax1d4x:not(:first-of-type){margin:6px 0 0;border-top:1px solid #efefef;}</style><div class="css-1ax1d4x"><style data-emotion="css 17jq971">.css-17jq971{algin-self:center;-webkit-flex:1 1 0%;-ms-flex:1 1 0%;flex:1 1 0%;}.css-17jq971 a div{color:#333;font-weight:500;}.css-17jq971 a div:hover{color:#aaa;}</style><div class="css-17jq971"><a href="/blog/20241210"><div>Spring Security - OAuth2.0 사용 시 여러개의 리소스 서버를 지원하기</div></a><style data-emotion="css 8fkig0">.css-8fkig0 a,.css-8fkig0 span{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;color:#8FD5A6;font-size:12px;padding-top:3px;}.css-8fkig0 a{cursor:pointer;}.css-8fkig0 span{cursor:default;}.css-8fkig0 a:hover{color:#E5C2C0;}</style><div class="css-8fkig0"><a href="/blog/category/spring">spring</a><span> |</span><span><span> </span><a href="/blog/tag/spring%20security">#<!-- -->spring security</a></span><span><span> </span><a href="/blog/tag/oauth2.0">#<!-- -->oauth2.0</a></span><span><span> </span><a href="/blog/tag/authenticationmanagerresolver">#<!-- -->AuthenticationManagerResolver</a></span></div></div><style data-emotion="css 1uiyfyi">.css-1uiyfyi{color:#aaa;-webkit-flex:none;-ms-flex:none;flex:none;font-size:12px;padding-top:3px;}</style><span class="css-1uiyfyi">2024-12-10</span></div><div class="css-1ax1d4x"><div class="css-17jq971"><a href="/blog/20241127"><div>File Upload에 필요한 Request Annotation(@RequestParam, @RequestPart, @ModelAttribute, @RequestBody)</div></a><div class="css-8fkig0"><a href="/blog/category/spring">spring</a><span> |</span><span><span> </span><a href="/blog/tag/@requestpart">#<!-- -->@RequestPart</a></span><span><span> </span><a href="/blog/tag/@requestparam">#<!-- -->@RequestParam</a></span><span><span> </span><a href="/blog/tag/@modelattribute">#<!-- -->@ModelAttribute</a></span><span><span> </span><a href="/blog/tag/@requestbody">#<!-- -->@RequestBody</a></span></div></div><span class="css-1uiyfyi">2024-11-27</span></div><div class="css-1ax1d4x"><div class="css-17jq971"><a href="/blog/20241119"><div>웹 취약점</div></a><div class="css-8fkig0"><a href="/blog/category/security">security</a><span> |</span><span><span> </span><a href="/blog/tag/web%20security">#<!-- -->web security</a></span><span><span> </span><a href="/blog/tag/web%EC%B7%A8%EC%95%BD%EC%A0%90">#<!-- -->web취약점</a></span></div></div><span class="css-1uiyfyi">2024-11-19</span></div><div class="css-1ax1d4x"><div class="css-17jq971"><a href="/blog/20240620"><div>기초 네트워크[유투브 조코딩 - 꼭 알아야 하는 네트워크 지식...(feat.강민철)</div></a><div class="css-8fkig0"><a href="/blog/category/network">network</a><span> |</span><span><span> </span><a href="/blog/tag/network">#<!-- -->network</a></span><span><span> </span><a href="/blog/tag/http">#<!-- -->http</a></span></div></div><span class="css-1uiyfyi">2024-06-20</span></div><div class="css-1ax1d4x"><div class="css-17jq971"><a href="/blog/20230925"><div>Bastion Host 사용하여 RDS 접속하기</div></a><div class="css-8fkig0"><a href="/blog/category/aws">aws</a><span> |</span><span><span> </span><a href="/blog/tag/bastionhost">#<!-- -->BastionHost</a></span><span><span> </span><a href="/blog/tag/rds">#<!-- -->RDS</a></span></div></div><span class="css-1uiyfyi">2023-09-25</span></div></div></div></div></main><div class="css-1hten03"></div></div><style data-emotion="css 9m6uqx">.css-9m6uqx{background:#fff;border-top:1px solid #0C8346;color:#333;font-size:13px;letter-spacing:-0.01em;padding:11px;}.css-9m6uqx div:not(:first-of-type){padding:4px 0 0;}.css-9m6uqx svg{display:inline;vertical-align:middle;}.css-9m6uqx a:hover{color:#E5C2C0;}.css-9m6uqx.fixed-bottom{bottom:0;position:fixed;width:100%;}</style><footer class=" css-9m6uqx"><div><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"></path></svg> m3rri17@gmail.com</div><div><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg><a target="_blank" href="https://github.com/m3rri"> https://github.com/m3rri</a></div><div>© 2022-<!-- -->2025<!-- --> KimHyeRi. All rights reserved.</div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"id":"20241023","content":"\n### 학습 배경\n\n-   이미 회사 개발 환경은 k8s로 돌아가고 있지만 사용만 하고 자세하게는 몰라서 로컬에서 간단한 모델을 구현해보기로함\n-   로컬에서 url path로 로드밸런싱 하는 ingress 구조\n\n---\n\n## 미리 준비할 것\n\n### 1. linux 운영체제 환경\n\n현재 회사에서 Azure 사용 중이라 azure vm 을 사용했다\n\n-   Ubuntu Server 24.04 LTS x64\n-   머신은 Standard B2s 사용 : 2 vcpu, 4GiB 메모리\n    -   minikube 사용을 위해 2 pcu, 2GB 를 선택했다 ([minikube 공식문서](https://minikube.sigs.k8s.io/docs/start/?arch=%2Fwindows%2Fx86-64%2Fstable%2F.exe+download))\n\n### 2. 간단한 Spring Boot application\n\n```java\n@RestController\n@Slf4j\npublic class KubeController {\n\n    @GetMapping(\"/domain\")\n    public String domain(){\n        log.info(\"===== domain service =====\");\n        log.info(\"ABCDEFGHIJKLMNOPQRSTUVWXYZ\");\n        log.info(\"ABCDEFGHIJKLMNOPQRSTUVWXYZ\");\n        log.info(\"==========================\");\n        return \"domain\";\n    }\n\n    @GetMapping(\"/non-domain\")\n    public String nonDomain(){\n        log.info(\"===== non domain =====\");\n        log.info(\"        BLANK\");\n        log.info(\"======================\");\n        return \"non domain\";\n    }\n}\n```\n\n`bootJar` 실행해서 jar 파일 생성해둠\n\n### 3. Docker image 준비\n\n-   Dockerfile\n\n```Docker\nFROM openjdk:17-jdk-alpine\n\nWORKDIR /app\n\nCOPY target/spring-app.jar /app/spring-app.jar\n# target/ 디렉토리에 있는 Spring Boot JAR 파일을 Docker 컨테이너의 /app 디렉토리에 복사\n\nEXPOSE 8080\n\nENTRYPOINT [\"java\", \"-jar\", \"spring-app.jar\"]\n```\n\n-   image build\n\n```bash\nC:\\\u003e docker build -t spring-app .\n# 현재 디렉토리 (.)에 있는 Dockerfile로 spring-app 이미지 생성\n# docker images로 생성된 이미지 확인 가능\n```\n\n-   docker hub로 업로드\n\n```bash\ndocker login -u username\n\ndocker tag spring-app \u003cusername\u003e/spring-app\ndocker push \u003cusername\u003e/spring-app\n```\n\n## 필요한 프로그램 설치\n\n### 1. docker\n\n```bash\n# 필요한 패키지 설치\nazureuser@m3rri17:~$ sudo apt-get install apt-transport-https ca-certificates curl gnupg-agent software-properties-common\n# docker 공식 gpg 키 추가\nazureuser@m3rri17:~$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -\n# docker 공식 apt 저장소 추가\nazureuser@m3rri17:~$ sudo add-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable\"\n# docker 설치\nazureuser@m3rri17:~$ sudo apt-get install docker-ce docker-ce-cli containerd.io\n```\n\nminikube driver를 docker로 사용하기 위해서는 아래 명령어를 추가로 실행해줘야 한다\n\n```bash\nazureuser@m3rri17:~$ sudo usermod -aG docker $USER \u0026\u0026 newgrp docker\n```\n\n⚠위 명령을 실행하지 않고 minikube를 시작하려고 할 때 발생하는 에러\n\n```bash\nazureuser@m3rri17:~$ minikube start --driver=docker --memory 200\n😄  minikube v1.34.0 on Ubuntu 24.04\n✨  Using the docker driver based on user configuration\n\n💣  Exiting due to PROVIDER_DOCKER_NEWGRP: \"docker version --format \u003cno value\u003e-\u003cno value\u003e:\u003cno value\u003e\" exit status 1: permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get \"http://%2Fvar%2Frun%2Fdocker.sock/v1.47/version\": dial unix /var/run/docker.sock: connect: permission denied\n💡  Suggestion: Add your user to the 'docker' group: 'sudo usermod -aG docker $USER \u0026\u0026 newgrp docker'\n📘  Documentation: https://docs.docker.com/engine/install/linux-postinstall/\n```\n\n`💡  Suggestion` 부분의 명령어를 실행\n\n### 2. minikube\n\n```bash\nazureuser@m3rri17:~$ curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64\nazureuser@m3rri17:~$ sudo install minikube-linux-amd64 /usr/local/bin/minikube \u0026\u0026 rm minikube-linux-amd64\n```\n\n출처 : [minikube 공식문서](https://minikube.sigs.k8s.io/docs/start/?arch=%2Fwindows%2Fx86-64%2Fstable%2F.exe+download)\n\n### 3. kubectl\n\n```bash\n# download the lastes release\nazureuser@m3rri17:~$ curl -LO \"https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl\n```\n\n```bash\n# install kubectl\nazureuser@m3rri17:~$ sudo install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl\n# version check\nazureuser@m3rri17:~$ kubectl version --client\n```\n\n출처 : [kubernetes 공식문서](https://kubernetes.io/ko/docs/tasks/tools/install-kubectl-linux/)\n\n### 4. ingress-controller\n\n```bash\nazureuser@m3rri17:~$ minikube addons enable ingress\n💡  ingress is an addon maintained by Kubernetes. For any concerns contact minikube on GitHub.\nYou can view the list of minikube maintainers at: https://github.com/kubernetes/minikube/blob/master/OWNERS\n    ▪ Using image registry.k8s.io/ingress-nginx/controller:v1.11.2\n    ▪ Using image registry.k8s.io/ingress-nginx/kube-webhook-certgen:v1.4.3\n    ▪ Using image registry.k8s.io/ingress-nginx/kube-webhook-certgen:v1.4.3\n🔎  Verifying ingress addon...\n🌟  The 'ingress' addon is enabled\n\nazureuser@m3rri17:~$ kubectl get all -n ingress-nginx\nNAME                                           READY   STATUS      RESTARTS   AGE\npod/ingress-nginx-admission-create-p7mcn       0/1     Completed   0          89s\npod/ingress-nginx-admission-patch-p5bf4        0/1     Completed   1          89s\npod/ingress-nginx-controller-bc57996ff-p9488   1/1     Running     0          89s\n\nNAME                                         TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)                      AGE\nservice/ingress-nginx-controller             NodePort    10.107.25.163    \u003cnone\u003e        80:31473/TCP,443:30846/TCP   89s\nservice/ingress-nginx-controller-admission   ClusterIP   10.101.131.201   \u003cnone\u003e        443/TCP                      89s\n\nNAME                                       READY   UP-TO-DATE   AVAILABLE   AGE\ndeployment.apps/ingress-nginx-controller   1/1     1            1           89s\n\nNAME                                                 DESIRED   CURRENT   READY   AGE\nreplicaset.apps/ingress-nginx-controller-bc57996ff   1         1         1       89s\n\nNAME                                       STATUS     COMPLETIONS   DURATION   AGE\njob.batch/ingress-nginx-admission-create   Complete   1/1           8s         89s\njob.batch/ingress-nginx-admission-patch    Complete   1/1           9s         89s\n```\n\n## k8s 구동\n\n### 1. minikube 시작\n\n```bash\nazureuser@m3rri17:~$ minikube start --driver=docker --memory 2048\n# --driver=docker : driver 겹쳐서 에러발생하는 경우 사용\n# --memory 2048 : ram 에 여유가 없어서 따로 지정함\n\nazureuser@m3rri17:~$ minikube status\n# 아래와 같이 나오면 정상\nminikube\ntype: Control Plane\nhost: Running\nkubelet: Running\napiserver: Running\nkubeconfig: Configured\n\nazureuser@m3rri17:~$ minikube ip\n# ip 확인하여 이후 Ingress 파일 작성 단계에서 사용\n```\n\n### 2. Deployment\n\n-   file 생성\n    -   spring-deployment-1.yaml\n        ```yaml\n        apiVersion: apps/v1\n        kind: Deployment\n        metadata:\n            name: spring-boot-deployment-1 # deployment의 이름\n        spec:\n            replicas: 1 # 생성할 pod 수\n            selector:\n                matchLabels:\n                    app: spring-boot-app-1 # app 이름 service 파일의 spec.selector.app 에서 동일한 이름 사용하면 매핑됨\n            template:\n                metadata:\n                    labels:\n                        app: spring-boot-app-1\n                spec:\n                    containers:\n                        - name: spring-boot-container-1\n                          image: \u003cdockerhub-username\u003e/spring-app # Docker Hub에서 가져올 이미지\n                          ports:\n                              - containerPort: 8080 # Spring Boot 기본 포트\n        ```\n    -   spring-deployment-2.yaml\n        ```yaml\n        apiVersion: apps/v1\n        kind: Deployment\n        metadata:\n            name: spring-boot-app-2\n        spec:\n            replicas: 1\n            selector:\n                matchLabels:\n                    app: spring-boot-app-2\n            template:\n                metadata:\n                    labels:\n                        app: spring-boot-app-2\n                spec:\n                    containers:\n                        - name: spring-boot-container-2\n                          image: \u003cdockerhub-username\u003e/spring-app\n                          ports:\n                              - containerPort: 8080\n        ```\n-   클러스터에 적용\n\n```bash\nazureuser@m3rri17:~$ kubectl apply -f spring-deployment-1.yaml\nazureuser@m3rri17:~$ kubectl apply -f spring-deployment-2.yaml\nazureuser@m3rri17:~$ kubectl get pods # pod name 확인\nNAME                                        READY   STATUS    RESTARTS   AGE\nspring-boot-deployment-1-5b4b9d89f8-2sjcq   1/1     Running   0          21s\nspring-boot-deployment-2-cd877558-jqw4x     1/1     Running   0          7s\n\nazureuser@m3rri17:~$ kubectl logs \u003cpod-name\u003e # -f는 실시간 로그 확인 결과는 아래 다시 정리\n```\n\n### 3. Service\n\n-   file 생성\n    -   spring-service-1.yaml\n        ```yaml\n        apiVersion: v1\n        kind: Service\n        metadata:\n            name: spring-boot-service-1 # service 이름. ingress 파일의 spec.rules.http.paths.backend.service.name에 동일하게 사용하여 매핑\n        spec:\n            selector:\n                app: spring-boot-app-1\n            ports:\n                - protocol: TCP\n                  port: 80\n                  targetPort: 8080 # 80포트로 들어온 요청을 8080 포트로 연결\n        ```\n    -   spring-service-2.yaml\n        ```yaml\n        apiVersion: v1\n        kind: Service\n        metadata:\n            name: spring-boot-service-2\n        spec:\n            selector:\n                app: spring-boot-app-2\n            ports:\n                - protocol: TCP\n                  port: 80\n                  targetPort: 8080\n        ```\n-   클러스터에 적용\n\n```bash\nazureuser@m3rri17:~$ kubectl apply -f spring-service-1.yaml\nazureuser@m3rri17:~$ kubectl apply -f spring-service-2.yaml\nazureuser@m3rri17:~$ kubectl get svc\nNAME                    TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)        AGE\nkubernetes              ClusterIP   10.96.0.1      \u003cnone\u003e        443/TCP        6m14s\nspring-boot-service-1   NodePort    10.98.26.57    \u003cnone\u003e        80:32309/TCP   7s\nspring-boot-service-2   NodePort    10.99.23.101   \u003cnone\u003e        80:32206/TCP   3s\n```\n\n### 4. Ingress\n\n-   file 생성\n    ingress.yaml\n    ```yaml\n    apiVersion: networking.k8s.io/v1\n    kind: Ingress\n    metadata:\n        name: spring-boot-ingress\n        annotations:\n            nginx.ingress.kubernetes.io/rewrite-target: /\n    spec:\n        rules:\n            - host: \"\u003cminikube-ip\u003e.nip.io\" # 또는 도메인 이름\n              http:\n                  paths:\n                      - path: /domain\n                        pathType: Prefix\n                        backend:\n                            service:\n                                name: spring-boot-service-1\n                                port:\n                                    number: 80\n                      - path: /non-domain\n                        pathType: Prefix\n                        backend:\n                            service:\n                                name: spring-boot-service-2\n                                port:\n                                    number: 80\n    ```\n-   클러스터에 적용\n\n```bash\nazureuser@m3rri17:~$ kubectl apply -f ingress.yaml\nazureuser@m3rri17:~$ kubectl get all -n ingress-nginx\nNAME                                           READY   STATUS      RESTARTS   AGE\npod/ingress-nginx-admission-create-p7mcn       0/1     Completed   0          9m51s\npod/ingress-nginx-admission-patch-p5bf4        0/1     Completed   1          9m51s\npod/ingress-nginx-controller-bc57996ff-p9488   1/1     Running     0          9m51s\n\nNAME                                         TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)                      AGE\nservice/ingress-nginx-controller             NodePort    10.107.25.163    \u003cnone\u003e        80:31473/TCP,443:30846/TCP   9m51s\nservice/ingress-nginx-controller-admission   ClusterIP   10.101.131.201   \u003cnone\u003e        443/TCP                      9m51s\n\nNAME                                       READY   UP-TO-DATE   AVAILABLE   AGE\ndeployment.apps/ingress-nginx-controller   1/1     1            1           9m51s\n\nNAME                                                 DESIRED   CURRENT   READY   AGE\nreplicaset.apps/ingress-nginx-controller-bc57996ff   1         1         1       9m51s\n\nNAME                                       STATUS     COMPLETIONS   DURATION   AGE\njob.batch/ingress-nginx-admission-create   Complete   1/1           8s         9m51s\njob.batch/ingress-nginx-admission-patch    Complete   1/1           9s         9m51s\n```\n\n### 5. 테스트 및 로그 확인\n\n-   /domain\n\n```bash\nazureuser@m3rri17:~$ curl http://192.168.49.2.nip.io:80/domain\ndomain\n\nazureuser@m3rri17:~$ kubectl logs spring-boot-deployment-1-5b4b9d89f8-2sjcq\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n\n :: Spring Boot ::                (v3.3.4)\n\n2024-10-22T07:15:39.011Z  INFO 1 --- [kubetarget] [           main] c.e.kubetarget.KubetargetApplication     : Starting KubetargetApplication v0.0.1-SNAPSHOT using Java 17-ea with PID 1 (/app/spring-app.jar started by root in /app)\n2024-10-22T07:15:39.016Z  INFO 1 --- [kubetarget] [           main] c.e.kubetarget.KubetargetApplication     : No active profile set, falling back to 1 default profile: \"default\"\n2024-10-22T07:15:41.258Z  INFO 1 --- [kubetarget] [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)\n2024-10-22T07:15:41.297Z  INFO 1 --- [kubetarget] [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2024-10-22T07:15:41.297Z  INFO 1 --- [kubetarget] [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]\n2024-10-22T07:15:41.608Z  INFO 1 --- [kubetarget] [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2024-10-22T07:15:41.614Z  INFO 1 --- [kubetarget] [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2529 ms\n2024-10-22T07:15:43.224Z  INFO 1 --- [kubetarget] [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'\n2024-10-22T07:15:43.262Z  INFO 1 --- [kubetarget] [           main] c.e.kubetarget.KubetargetApplication     : Started KubetargetApplication in 4.891 seconds (process running for 5.76)\n2024-10-22T07:23:43.510Z  INFO 1 --- [kubetarget] [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'\n2024-10-22T07:23:43.510Z  INFO 1 --- [kubetarget] [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'\n2024-10-22T07:23:43.512Z  INFO 1 --- [kubetarget] [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms\n2024-10-22T07:25:43.823Z  INFO 1 --- [kubetarget] [nio-8080-exec-5] c.e.k.d.controller.DomainController      : ===== domain service =====\n2024-10-22T07:25:43.823Z  INFO 1 --- [kubetarget] [nio-8080-exec-5] c.e.k.d.controller.DomainController      : ABCDEFGHIJKLMNOPQRSTUVWXYZ\n2024-10-22T07:25:43.823Z  INFO 1 --- [kubetarget] [nio-8080-exec-5] c.e.k.d.controller.DomainController      : ABCDEFGHIJKLMNOPQRSTUVWXYZ\n2024-10-22T07:25:43.823Z  INFO 1 --- [kubetarget] [nio-8080-exec-5] c.e.k.d.controller.DomainController      : ==========================\n```\n\n-   /non-domain\n\n```bash\nazureuser@m3rri17:~$ curl http://192.168.49.2.nip.io:80/non-domain\nnon domain\n\nazureuser@m3rri17:~$ kubectl logs spring-boot-deployment-2-cd877558-jqw4x\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n\n :: Spring Boot ::                (v3.3.4)\n\n2024-10-22T07:15:42.639Z  INFO 1 --- [kubetarget] [           main] c.e.kubetarget.KubetargetApplication     : Starting KubetargetApplication v0.0.1-SNAPSHOT using Java 17-ea with PID 1 (/app/spring-app.jar started by root in /app)\n2024-10-22T07:15:42.657Z  INFO 1 --- [kubetarget] [           main] c.e.kubetarget.KubetargetApplication     : No active profile set, falling back to 1 default profile: \"default\"\n2024-10-22T07:15:44.533Z  INFO 1 --- [kubetarget] [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)\n2024-10-22T07:15:44.551Z  INFO 1 --- [kubetarget] [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2024-10-22T07:15:44.552Z  INFO 1 --- [kubetarget] [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]\n2024-10-22T07:15:44.697Z  INFO 1 --- [kubetarget] [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2024-10-22T07:15:44.699Z  INFO 1 --- [kubetarget] [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1821 ms\n2024-10-22T07:15:45.653Z  INFO 1 --- [kubetarget] [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'\n2024-10-22T07:15:45.706Z  INFO 1 --- [kubetarget] [           main] c.e.kubetarget.KubetargetApplication     : Started KubetargetApplication in 4.273 seconds (process running for 5.877)\n2024-10-22T07:25:51.778Z  INFO 1 --- [kubetarget] [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'\n2024-10-22T07:25:51.778Z  INFO 1 --- [kubetarget] [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'\n2024-10-22T07:25:51.780Z  INFO 1 --- [kubetarget] [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\n2024-10-22T07:25:51.822Z  INFO 1 --- [kubetarget] [nio-8080-exec-1] c.e.k.d.controller.DomainController      : ===== non domain =====\n2024-10-22T07:25:51.822Z  INFO 1 --- [kubetarget] [nio-8080-exec-1] c.e.k.d.controller.DomainController      :         BLANK\n2024-10-22T07:25:51.822Z  INFO 1 --- [kubetarget] [nio-8080-exec-1] c.e.k.d.controller.DomainController      : ======================\n```\n\npath에 따라 deployment1과 deployment2로 요청이 잘 나뉘어 들어갔다\n","title":"로컬에서 minikube로 k8s 맛보기","date":"2024-10-23","category":["infra","kubernetes"],"tag":["devops","k8s","ingress"]},"prev":{"id":"20240620","title":"기초 네트워크[유투브 조코딩 - 꼭 알아야 하는 네트워크 지식...(feat.강민철)","date":"2024-06-20","category":["infra","network"],"tag":["network","http"]},"next":{"id":"20241119","title":"웹 취약점","date":"2024-11-19","category":["sw","security"],"tag":["web security","web취약점"]},"nearPost":[{"id":"20241210","title":"Spring Security - OAuth2.0 사용 시 여러개의 리소스 서버를 지원하기","date":"2024-12-10","category":["backend","spring"],"tag":["spring security","oauth2.0","AuthenticationManagerResolver"]},{"id":"20241127","title":"File Upload에 필요한 Request Annotation(@RequestParam, @RequestPart, @ModelAttribute, @RequestBody)","date":"2024-11-27","category":["backend","spring"],"tag":["@RequestPart","@RequestParam","@ModelAttribute","@RequestBody"]},{"id":"20241119","title":"웹 취약점","date":"2024-11-19","category":["sw","security"],"tag":["web security","web취약점"]},{"id":"20240620","title":"기초 네트워크[유투브 조코딩 - 꼭 알아야 하는 네트워크 지식...(feat.강민철)","date":"2024-06-20","category":["infra","network"],"tag":["network","http"]},{"id":"20230925","title":"Bastion Host 사용하여 RDS 접속하기","date":"2023-09-25","category":["Cloud","aws"],"tag":["BastionHost","RDS"]}]},"__N_SSG":true},"page":"/blog/[postId]","query":{"postId":"20241023"},"buildId":"duOvbHUXu5a5ex6LfSiN2","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>