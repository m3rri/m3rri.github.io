<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/703309190fe4a24f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/703309190fe4a24f.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-7fcf30080e790857.js" defer=""></script><script src="/_next/static/chunks/framework-bb5c596eafb42b22.js" defer=""></script><script src="/_next/static/chunks/main-1d8adce4d7e8417e.js" defer=""></script><script src="/_next/static/chunks/pages/_app-8d5f5240cf41e8bd.js" defer=""></script><script src="/_next/static/chunks/2-75fdb6de5283616c.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5BpostId%5D-ead455fee945e7b4.js" defer=""></script><script src="/_next/static/QwBFiw0pxbCjdXqQ2Kkjq/_buildManifest.js" defer=""></script><script src="/_next/static/QwBFiw0pxbCjdXqQ2Kkjq/_ssgManifest.js" defer=""></script><script src="/_next/static/QwBFiw0pxbCjdXqQ2Kkjq/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><style data-emotion="css tlc243">.css-tlc243{color:#333;}</style><div class="css-tlc243"><style data-emotion="css nmrzmf">.css-nmrzmf{border-bottom:1px solid #0C8346;}.css-nmrzmf.header-get-on{z-index:10;position:fixed;top:0;width:100%;}</style><header class=" css-nmrzmf"><style data-emotion="css tuhu7l">.css-tuhu7l{padding:7px 8px;background:#fff;}.css-tuhu7l .navbar-container{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-left:auto;margin-right:auto;width:100%;}.css-tuhu7l .navbar-blog-name{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-style:italic;font-size:20px;color:#333;font-weight:bold;white-space:nowrap;}.css-tuhu7l .navbar-blog-name:hover{font-style:normal;}.css-tuhu7l .navbar-dropdown-button{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-left:12px;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;padding:0 4px;}@media(min-width: 768px){.css-tuhu7l .navbar-dropdown-button{display:none;}}.css-tuhu7l .navbar-menu-list-wrapper{width:100%;margin-bottom:-6px;}@media(min-width: 768px){.css-tuhu7l .navbar-menu-list-wrapper{border:0;display:block;width:auto;margin-bottom:0;}}.css-tuhu7l .navbar-menu-list-wrapper .navbar-menu-list{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;font-size:14px;margin:16px -8px 0 -8px;}.css-tuhu7l .navbar-menu-list-wrapper .navbar-menu-list .navbar-menu:not(:first-of-type){border-top:1px solid #0C8346;}@media(min-width: 768px){.css-tuhu7l .navbar-menu-list-wrapper .navbar-menu-list{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;margin:0;font-size:14px;line-height:20px;}.css-tuhu7l .navbar-menu-list-wrapper .navbar-menu-list .navbar-menu:not(:first-of-type){border-top:0;border-left:1px solid #0C8346;}}</style><nav class="css-tuhu7l"><div class="navbar-container"><a class="navbar-blog-name" href="/">MERRI`s DEVELOG</a><button type="button" class="navbar-dropdown-button"><span class="sr-only">Open blog menu</span>ğŸ“š</button><style data-emotion="css 1hyfx7x">.css-1hyfx7x{display:none;}</style><div class="navbar-menu-list-wrapper css-1hyfx7x"><ul class="navbar-menu-list"><style data-emotion="css nvv0w9">@media(min-width: 768px){.css-nvv0w9{padding:10px 20px 7px;margin:-10px 0 -10px -1px;}.css-nvv0w9.active-link-home{padding-bottom:12px;}}</style><li class="navbar-menu css-nvv0w9"></li><style data-emotion="css e7ia66">.css-e7ia66:hover{background:#8FD5A6;transition-duration:500ms;}.css-e7ia66:hover .navbar-menu-link,.css-e7ia66:hover .navbar-menu a{color:#333;}</style><style data-emotion="css 19x6ejr">@media(min-width: 768px){.css-19x6ejr{padding:10px 20px 7px;margin:-10px 0 -10px -1px;}.css-19x6ejr.active-link-home{padding-bottom:12px;}}.css-19x6ejr:hover{background:#8FD5A6;transition-duration:500ms;}.css-19x6ejr:hover .navbar-menu-link,.css-19x6ejr:hover .navbar-menu a{color:#333;}</style><li class="navbar-menu true css-19x6ejr"><style data-emotion="css mnwgy4">.css-mnwgy4{border-bottom:6px solid #E5C2C0;}</style><style data-emotion="css 4xdf42">.css-4xdf42{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:9px 16px 9px 12px;width:100%;border-bottom:6px solid #E5C2C0;}.css-4xdf42:hover{border:1 solid #8FD5A6;color:#333;transition-duration:500ms;}@media(min-width: 768px){.css-4xdf42{padding:16px 12px 7px;margin:-14px -20px -7px;width:auto;}}</style><button data-dropdown-for="dropdown_Blog" class="css-4xdf42">Blog<!-- --> ğŸ“”</button><style data-emotion="css ewer5w">.css-ewer5w{display:none;}</style><style data-emotion="css j3irkc">.css-j3irkc{background:#fff;border:1px solid #0C8346;margin:8px 20px;position:relative;width:auto;z-index:0;display:none;}@media(min-width: 768px){.css-j3irkc{margin:6px;position:absolute;z-index:10;}}.css-j3irkc .dropdown-menu-list{font-size:14px;padding:4px 0;}.css-j3irkc .dropdown-menu-list .dropdown-menu-list-part-name{color:#333;font-size:12px;font-weight:bold;padding-left:8px;}.css-j3irkc .dropdown-menu-list li{border:0;}.css-j3irkc .dropdown-menu-list a{display:block;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;padding:8px 16px;}.css-j3irkc .dropdown-menu-list a:hover{background:#8FD5A6;color:#fff;transition-duration:300ms;}.css-j3irkc .dropdown-menu-list .dropdown-menu-active-link{background:#E5C2C0;}.css-j3irkc ul:not(:first-of-type){border-top:1px solid #8FD5A6;}</style><div id="dropdown_Blog" class="css-j3irkc"><ul class="dropdown-menu-list"><span class="dropdown-menu-list-part-name">CLOUD</span><li><a class="" href="/blog/category/aws">Aws</a></li></ul><ul class="dropdown-menu-list"><span class="dropdown-menu-list-part-name">BACKEND</span><li><a class="" href="/blog/category/spring">Spring</a></li><li><a class="" href="/blog/category/java">Java</a></li></ul><ul class="dropdown-menu-list"><span class="dropdown-menu-list-part-name">OS</span><li><a class="" href="/blog/category/window">Window</a></li><li><a class="" href="/blog/category/linux">Linux</a></li></ul><ul class="dropdown-menu-list"><span class="dropdown-menu-list-part-name">SW</span><li><a class="" href="/blog/category/design%20pattern">Design pattern</a></li></ul><ul class="dropdown-menu-list"><span class="dropdown-menu-list-part-name">FRONTEND</span><li><a class="" href="/blog/category/javascript">Javascript</a></li></ul><ul class="dropdown-menu-list"><span class="dropdown-menu-list-part-name">TOOL</span><li><a class="" href="/blog/category/git">Git</a></li></ul><ul class="dropdown-menu-list"><span class="dropdown-menu-list-part-name">IDEA</span><li><a class="" href="/blog/category/intellij">Intellij</a></li></ul></div></li><li class="navbar-menu true css-19x6ejr"><style data-emotion="css a3e3m7">.css-a3e3m7{cursor:pointer;display:block;padding:8px 16px 8px 12px;}@media(min-width: 768px){.css-a3e3m7{padding-bottom:7px;padding-top:7px;padding-right:12px;margin:-7px -20px;}}.css-a3e3m7.navbar-menu-active-link{border-bottom:6px solid transparent;border-image:linear-gradient(to right, #E5C2C0 25%, #fff 25%) 1 100%;border-image-slice:1;}@media(min-width: 768px){.css-a3e3m7.navbar-menu-active-link{border-image:linear-gradient(to right, #E5C2C0 100%, #fff) 1 100%;border-image-slice:1;}}</style><a class="navbar-menu-link  css-a3e3m7">Portfolio<!-- --> ğŸ“„</a></li><li class="navbar-menu true css-19x6ejr"><a class="navbar-menu-link  css-a3e3m7">About<!-- --> ğŸ“„</a></li><li class="navbar-menu css-nvv0w9"></li></ul></div></div></nav></header><style data-emotion="css 1ho3vgx">.css-1ho3vgx{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}.css-1ho3vgx .main-area{-webkit-flex:none;-ms-flex:none;flex:none;margin:16px 0;width:100%;}@media(min-width: 1024px){.css-1ho3vgx .main-area{width:1000px;margin:16px 12px;}}</style><div class="css-1ho3vgx"><style data-emotion="css 1hten03">.css-1hten03{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;height:100%;width:8px;}</style><div class="css-1hten03"></div><main class="main-area"><style data-emotion="css 76ijk2">.css-76ijk2{border:0;margin:-16px 0;}@media(min-width: 1024px){.css-76ijk2{border-left:1px solid #0C8346;border-right:1px solid #0C8346;margin-left:0;margin-right:0;}}.css-76ijk2 .markdown-body{padding:12px 20px;}@media(min-width: 1024px){.css-76ijk2 .markdown-body{padding-left:16px;padding-right:16px;}}.css-76ijk2 .markdown-body pre div,.css-76ijk2 .markdown-body pre div code{background:none!important;}.css-76ijk2 .markdown-body img{display:block;margin:1rem auto;}.css-76ijk2 .end-of-post{color:#329F5B;padding:8px 8px0 8px;}@media(min-width: 1024px){.css-76ijk2 .end-of-post{padding-left:0;padding-right:0;}}</style><div class="css-76ijk2"><style data-emotion="css ao9izc">.css-ao9izc{border-bottom:1px solid #0C8346;padding:8px;}.css-ao9izc h1{color:#333;padding-bottom:4px;}.css-ao9izc div{color:#aaa;font-size:14px;}</style><header class="css-ao9izc"><h1>Github Action - AWS EC2ì— SpringBoot ë°°í¬</h1><div>2022-11-14</div></header><style data-emotion="css srs5r4">.css-srs5r4{padding:8px;}.css-srs5r4 div{font-size:14px;}</style><div class="css-srs5r4"><div>ğŸ“‚ <!-- -->tool &gt; git</div><div>ğŸ§¶ #<!-- -->git-action #git #aws</div></div><main class="markdown-body"><h2>Git Actionsë¡œ CI/CD êµ¬í˜„í•˜ê¸° - SpringBoot í”„ë¡œì íŠ¸ AWS EC2ì— ë°°í¬ (ê²°ë¡  : ì‹¤íŒ¨)</h2>
<h3>Key Pair ìƒì„±</h3>
<ol>
<li>AWS console &gt; EC2 ë„¤ë¹„ê²Œì´ì…˜ &gt; ë„¤íŠ¸ì›Œí¬ ë° ë³´ì•ˆ &gt; í‚¤ í˜ì–´ &gt; í‚¤ í˜ì–´ ìƒì„±
<img src="https://user-images.githubusercontent.com/94826141/201557444-d4224278-767e-43af-9a18-c4bf3b28b21c.png" alt="Untitled"/></li>
<li>ì´ë¦„ / ìœ í˜• / í˜•ì‹ / íƒœê·¸ ë“± ì ì ˆí•œ ì •ë³´ ì…ë ¥ í›„ í‚¤í˜ì–´ ìƒì„± &gt; ë‹¤ìš´ë¡œë“œ
<img src="https://user-images.githubusercontent.com/94826141/201557566-8d20e37f-f7f2-40cf-ba28-aea957595385.png" alt="image"/></li>
</ol>
<h3>github Actions secrets ë“±ë¡</h3>
<p><strong>github repo &gt; Settings &gt; Security &gt; Secrets &gt; Actions &gt; New repository secret</strong></p>
<ol>
<li>EC2_PEM
<img src="https://user-images.githubusercontent.com/94826141/201557927-dba3d8a3-3c28-477f-ab18-5225427a4bf6.png" alt="Screenshot-1"/></li>
</ol>
<ul>
<li>Name : actions ì‹¤í–‰íŒŒì¼ì—ì„œ í˜¸ì¶œí•  ì´ë¦„ìœ¼ë¡œ ì„ì˜ ì„¤ì •</li>
<li>Secret : ìœ— ë‹¨ê³„ 2ë²ˆì—ì„œ ë‹¤ìš´ë¡œë“œ ë°›ì€ .pem íŒŒì¼ì˜ ë‚´ìš©ì„ ë³µì‚¬í•˜ì—¬ ì…ë ¥<!-- -->
<ul>
<li>[-----BEGIN RSA PRIVATE KEY-----] ~ ì „ì²´</li>
</ul>
</li>
</ul>
<ol start="2">
<li>EC2_IP &amp; EC2_USER</li>
</ol>
<ul>
<li>AWS console &gt; EC2 ë„¤ë¹„ê²Œì´ì…˜ &gt; ì¸ìŠ¤í„´ìŠ¤ &gt; íƒ€ê²Ÿ ì¸ìŠ¤í„´ìŠ¤ ì„ íƒ &gt; ì‘ì—… - ì—°ê²° &gt; ì¸ìŠ¤í„´ìŠ¤ì— ì—°ê²° í™”ë©´ì—ì„œ IP í™•ì¸
<img src="https://user-images.githubusercontent.com/94826141/201559885-5c7313aa-dcdb-453c-9602-5891e1490dce.png" alt="image"/></li>
<li>1ë²ˆê³¼ ê°™ì´ secretsë¡œ ê°ê° ë“±ë¡</li>
</ul>
<h3>github action ì‹¤í–‰íŒŒì¼ ì‘ì„±</h3>
<ul>
<li>deploy.yml íŒŒì¼ ì‘ì„±í•˜ì—¬ .github/workflows í•˜ìœ„ì— ì €ì¥</li>
<li>java ëª…ë ¹ì–´ë¡œ jar íŒŒì¼ êµ¬ë™ ì‹œ git actionsê°€ ì •ìƒì ìœ¼ë¡œ ì¢…ë£Œë˜ì§ˆ ì•Šì•„ì„œ ì´ë²ˆ ë°©ë²•ì€ ê¸°ë¡ë§Œ í•¨</li>
</ul>
<pre><div style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#90a4ae;background:#fafafa;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-yml" style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#90a4ae;background:#fafafa;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token key" style="color:#7c4dff">name</span><span class="token token" style="color:#39adb5">:</span><span> springboot</span><span class="token token" style="color:#39adb5">-</span><span>cicd</span><span class="token token" style="color:#39adb5">-</span><span>ec2
</span>
<span></span><span class="token token key" style="color:#7c4dff">on</span><span class="token token" style="color:#39adb5">:</span><span>
</span><span>  </span><span class="token token key" style="color:#7c4dff">push</span><span class="token token" style="color:#39adb5">:</span><span>
</span><span>    </span><span class="token token key" style="color:#7c4dff">branches</span><span class="token token" style="color:#39adb5">:</span><span>
</span><span>      </span><span class="token token" style="color:#39adb5">-</span><span> main
</span><span>  </span><span class="token token key" style="color:#7c4dff">workflow_dispatch</span><span class="token token" style="color:#39adb5">:</span><span>
</span>
<span></span><span class="token token key" style="color:#7c4dff">env</span><span class="token token" style="color:#39adb5">:</span><span>
</span><span>  </span><span class="token token key" style="color:#7c4dff">AWS_ACCOUNT_NUMBER</span><span class="token token" style="color:#39adb5">:</span><span> </span><span class="token token" style="color:#7c4dff;font-weight:bold">**********</span><span>
</span><span>  </span><span class="token token key" style="color:#7c4dff">AWS_IAM_USER</span><span class="token token" style="color:#39adb5">:</span><span> </span><span class="token token" style="color:#7c4dff;font-weight:bold">******</span><span>
</span><span>  </span><span class="token token key" style="color:#7c4dff">AWS_REGION</span><span class="token token" style="color:#39adb5">:</span><span> ap</span><span class="token token" style="color:#39adb5">-</span><span>northeast</span><span class="token token" style="color:#39adb5">-</span><span class="token token" style="color:#f76d47">2</span><span>
</span>
<span></span><span class="token token key" style="color:#7c4dff">permissions</span><span class="token token" style="color:#39adb5">:</span><span>
</span><span>  </span><span class="token token key" style="color:#7c4dff">id-token</span><span class="token token" style="color:#39adb5">:</span><span> write
</span><span>  </span><span class="token token key" style="color:#7c4dff">contents</span><span class="token token" style="color:#39adb5">:</span><span> read
</span>
<span></span><span class="token token key" style="color:#7c4dff">jobs</span><span class="token token" style="color:#39adb5">:</span><span>
</span><span>  </span><span class="token token key" style="color:#7c4dff">deploy</span><span class="token token" style="color:#39adb5">:</span><span>
</span><span>    </span><span class="token token key" style="color:#7c4dff">runs-on</span><span class="token token" style="color:#39adb5">:</span><span> ubuntu</span><span class="token token" style="color:#39adb5">-</span><span>latest
</span><span>    </span><span class="token token key" style="color:#7c4dff">steps</span><span class="token token" style="color:#39adb5">:</span><span>
</span><span>      </span><span class="token token" style="color:#39adb5">-</span><span> </span><span class="token token key" style="color:#7c4dff">name</span><span class="token token" style="color:#39adb5">:</span><span> Checkout
</span><span>        </span><span class="token token key" style="color:#7c4dff">uses</span><span class="token token" style="color:#39adb5">:</span><span> actions/checkout@v2
</span>
<span>      </span><span class="token token" style="color:#39adb5">-</span><span> </span><span class="token token key" style="color:#7c4dff">name</span><span class="token token" style="color:#39adb5">:</span><span> Get current time
</span><span>        </span><span class="token token key" style="color:#7c4dff">uses</span><span class="token token" style="color:#39adb5">:</span><span> josStorer/get</span><span class="token token" style="color:#39adb5">-</span><span>current</span><span class="token token" style="color:#39adb5">-</span><span>time@v2
</span><span>        </span><span class="token token key" style="color:#7c4dff">id</span><span class="token token" style="color:#39adb5">:</span><span> current</span><span class="token token" style="color:#39adb5">-</span><span>time
</span><span>        </span><span class="token token key" style="color:#7c4dff">with</span><span class="token token" style="color:#39adb5">:</span><span>
</span><span>          </span><span class="token token key" style="color:#7c4dff">format</span><span class="token token" style="color:#39adb5">:</span><span> YYYYMMDDTHHmmss
</span><span>          </span><span class="token token key" style="color:#7c4dff">utcOffset</span><span class="token token" style="color:#39adb5">:</span><span> </span><span class="token token" style="color:#f6a434">&quot;+09:00&quot;</span><span>
</span>
<span>      </span><span class="token token" style="color:#39adb5">-</span><span> </span><span class="token token key" style="color:#7c4dff">name</span><span class="token token" style="color:#39adb5">:</span><span> Run scripts in EC2 server
</span><span>        </span><span class="token token key" style="color:#7c4dff">uses</span><span class="token token" style="color:#39adb5">:</span><span> appleboy/ssh</span><span class="token token" style="color:#39adb5">-</span><span>action@master
</span><span>        </span><span class="token token key" style="color:#7c4dff">with</span><span class="token token" style="color:#39adb5">:</span><span>
</span><span>          </span><span class="token token key" style="color:#7c4dff">key</span><span class="token token" style="color:#39adb5">:</span><span> $</span><span class="token token" style="color:#39adb5">{</span><span class="token token" style="color:#39adb5">{</span><span> secrets.EC2_PEM </span><span class="token token" style="color:#39adb5">}</span><span class="token token" style="color:#39adb5">}</span><span>
</span><span>          </span><span class="token token key" style="color:#7c4dff">host</span><span class="token token" style="color:#39adb5">:</span><span> $</span><span class="token token" style="color:#39adb5">{</span><span class="token token" style="color:#39adb5">{</span><span> secrets.EC2_IP </span><span class="token token" style="color:#39adb5">}</span><span class="token token" style="color:#39adb5">}</span><span>
</span><span>          </span><span class="token token key" style="color:#7c4dff">username</span><span class="token token" style="color:#39adb5">:</span><span> $</span><span class="token token" style="color:#39adb5">{</span><span class="token token" style="color:#39adb5">{</span><span> secrets.EC2_USER </span><span class="token token" style="color:#39adb5">}</span><span class="token token" style="color:#39adb5">}</span><span>
</span><span>          </span><span class="token token key" style="color:#7c4dff">script</span><span class="token token" style="color:#39adb5">:</span><span> </span><span class="token token" style="color:#39adb5">|</span><span class="token token scalar" style="color:#f6a434">
</span><span class="token token scalar" style="color:#f6a434">            cd deploy/git-action-test-ec2
</span><span class="token token scalar" style="color:#f6a434">            git pull origin main
</span><span class="token token scalar" style="color:#f6a434">            chmod +x ./gradlew
</span><span class="token token scalar" style="color:#f6a434">            ./gradlew bootJar
</span><span class="token token scalar" style="color:#f6a434">            cd ../../
</span><span class="token token scalar" style="color:#f6a434">            kill -15 `cat ./web/web.pid`
</span><span class="token token scalar" style="color:#f6a434">            mv ./web/*.jar ./backup
</span><span class="token token scalar" style="color:#f6a434">            mv ./deploy/git-action-test-ec2/build/libs/*.jar ./web/web.${{ steps.current-time.outputs.formattedTime }}.jar
</span><span class="token token scalar" style="color:#f6a434">            java -Xms256m -jar ./web/web.${{ steps.current-time.outputs.formattedTime }}.jar</span></code></div></pre>
<h3>AWS configuration</h3>
<ul>
<li>ìœ„ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê¸° ì „ì— IAMì—ì„œ í•´ì•¼í•  ì¼ì´ ìˆìŒ<br/>
<a href="https://rocksea.tistory.com/467">Configure AWS Credentials For GitHub Actions with OIDC</a></li>
</ul></main><div class="end-of-post">/end of <!-- -->Github Action - AWS EC2ì— SpringBoot ë°°í¬</div><style data-emotion="css 1v142rx">.css-1v142rx{border-top:1px solid #0C8346;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:8px;}@media(min-width: 768px){.css-1v142rx{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}}.css-1v142rx div:first-of-type{-webkit-flex:1 1 0%;-ms-flex:1 1 0%;flex:1 1 0%;}.css-1v142rx div:last-of-type{text-align:right;}</style><footer class="css-1v142rx"><div><style data-emotion="css 173eilp">.css-173eilp{cursor:pointer;padding-left:4px;}.css-173eilp:hover{color:#aaa;}</style><a class="css-173eilp"><style data-emotion="css d5okxo">.css-d5okxo{font-size:0.85rem;}</style><span class="css-d5okxo">(ì´ì „ê¸€)</span>Ubuntu ëª…ë ¹ì–´ ì •ë¦¬(2)</a></div><div><a class="css-173eilp">[js] Default parameters of function &amp; Spread syntax in object literals<span class="css-d5okxo">(ë‹¤ìŒê¸€)</span></a></div></footer><div style="border-top:1px solid #0C8346;padding:8px"><div style="display:flex;justify-content:space-between"><span style="font-weight:bold">CONTENT LIST</span><span style="color:#8FD5A6;font-weight:bold">MERRIï¼‡s DEVELOG</span></div><div><style data-emotion="css 1ax1d4x">.css-1ax1d4x{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;padding:12px 8px;}.css-1ax1d4x:not(:first-of-type){margin:6px 0 0;border-top:1px solid #efefef;}</style><div class="css-1ax1d4x"><style data-emotion="css 17jq971">.css-17jq971{algin-self:center;-webkit-flex:1 1 0%;-ms-flex:1 1 0%;flex:1 1 0%;}.css-17jq971 a div{color:#333;font-weight:500;}.css-17jq971 a div:hover{color:#aaa;}</style><div class="css-17jq971"><a href="/blog/20230221"><div>wsl.exe ì‹¤í–‰ë˜ì§€ ì•ŠìŒ</div></a><style data-emotion="css 10if0y5">.css-10if0y5{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;color:#8FD5A6;cursor:default;font-size:12px;padding-top:3px;}</style><div class="css-10if0y5">window | #wsl #ubuntu</div></div><style data-emotion="css 1uiyfyi">.css-1uiyfyi{color:#aaa;-webkit-flex:none;-ms-flex:none;flex:none;font-size:12px;padding-top:3px;}</style><span class="css-1uiyfyi">2023-02-21</span></div><div class="css-1ax1d4x"><div class="css-17jq971"><a href="/blog/20230216"><div>Facade Pattern (íŒŒì‚¬ë“œ íŒ¨í„´)</div></a><div class="css-10if0y5">design pattern | #oop #design pattern</div></div><span class="css-1uiyfyi">2023-02-16</span></div><div class="css-1ax1d4x"><div class="css-17jq971"><a href="/blog/20230209"><div>[js] Default parameters of function &amp; Spread syntax in object literals</div></a><div class="css-10if0y5">javascript | #javascript #es5 #default parameter #spread syntax</div></div><span class="css-1uiyfyi">2023-02-09</span></div><div class="css-1ax1d4x"><div class="css-17jq971"><a href="/blog/20221109"><div>Ubuntu ëª…ë ¹ì–´ ì •ë¦¬(2)</div></a><div class="css-10if0y5">linux | #command</div></div><span class="css-1uiyfyi">2022-11-09</span></div><div class="css-1ax1d4x"><div class="css-17jq971"><a href="/blog/20221028"><div>JPA ìƒì†ê´€ê³„ ë§¤í•‘ ì „ëµ</div></a><div class="css-10if0y5">spring | #jpa #@inheritance #@MappedSuperclass</div></div><span class="css-1uiyfyi">2022-10-28</span></div></div></div></div></main><div class="css-1hten03"></div></div><style data-emotion="css 9m6uqx">.css-9m6uqx{background:#fff;border-top:1px solid #0C8346;color:#333;font-size:13px;letter-spacing:-0.01em;padding:11px;}.css-9m6uqx div:not(:first-of-type){padding:4px 0 0;}.css-9m6uqx svg{display:inline;vertical-align:middle;}.css-9m6uqx a:hover{color:#E5C2C0;}.css-9m6uqx.fixed-bottom{bottom:0;position:fixed;width:100%;}</style><footer class=" css-9m6uqx"><div><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"></path></svg> m3rri17@gmail.com</div><div><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg><a target="_blank" href="https://github.com/m3rri"> https://github.com/m3rri</a></div><div>Â© 2022-<!-- -->2024<!-- --> KimHyeRi. All rights reserved.</div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"id":"20221114","content":"\n## Git Actionsë¡œ CI/CD êµ¬í˜„í•˜ê¸° - SpringBoot í”„ë¡œì íŠ¸ AWS EC2ì— ë°°í¬ (ê²°ë¡  : ì‹¤íŒ¨)\n### Key Pair ìƒì„±\n1. AWS console \u003e EC2 ë„¤ë¹„ê²Œì´ì…˜ \u003e ë„¤íŠ¸ì›Œí¬ ë° ë³´ì•ˆ \u003e í‚¤ í˜ì–´ \u003e í‚¤ í˜ì–´ ìƒì„±\n![Untitled](https://user-images.githubusercontent.com/94826141/201557444-d4224278-767e-43af-9a18-c4bf3b28b21c.png)\n2. ì´ë¦„ / ìœ í˜• / í˜•ì‹ / íƒœê·¸ ë“± ì ì ˆí•œ ì •ë³´ ì…ë ¥ í›„ í‚¤í˜ì–´ ìƒì„± \u003e ë‹¤ìš´ë¡œë“œ\n![image](https://user-images.githubusercontent.com/94826141/201557566-8d20e37f-f7f2-40cf-ba28-aea957595385.png)\n### github Actions secrets ë“±ë¡\n**github repo \u003e Settings \u003e Security \u003e Secrets \u003e Actions \u003e New repository secret**\n1. EC2_PEM\n![Screenshot-1](https://user-images.githubusercontent.com/94826141/201557927-dba3d8a3-3c28-477f-ab18-5225427a4bf6.png)\n* Name : actions ì‹¤í–‰íŒŒì¼ì—ì„œ í˜¸ì¶œí•  ì´ë¦„ìœ¼ë¡œ ì„ì˜ ì„¤ì •\n* Secret : ìœ— ë‹¨ê³„ 2ë²ˆì—ì„œ ë‹¤ìš´ë¡œë“œ ë°›ì€ .pem íŒŒì¼ì˜ ë‚´ìš©ì„ ë³µì‚¬í•˜ì—¬ ì…ë ¥\n  * [-----BEGIN RSA PRIVATE KEY-----] ~ ì „ì²´\n2. EC2_IP \u0026 EC2_USER\n* AWS console \u003e EC2 ë„¤ë¹„ê²Œì´ì…˜ \u003e ì¸ìŠ¤í„´ìŠ¤ \u003e íƒ€ê²Ÿ ì¸ìŠ¤í„´ìŠ¤ ì„ íƒ \u003e ì‘ì—… - ì—°ê²° \u003e ì¸ìŠ¤í„´ìŠ¤ì— ì—°ê²° í™”ë©´ì—ì„œ IP í™•ì¸\n![image](https://user-images.githubusercontent.com/94826141/201559885-5c7313aa-dcdb-453c-9602-5891e1490dce.png)\n* 1ë²ˆê³¼ ê°™ì´ secretsë¡œ ê°ê° ë“±ë¡\n### github action ì‹¤í–‰íŒŒì¼ ì‘ì„±\n- deploy.yml íŒŒì¼ ì‘ì„±í•˜ì—¬ .github/workflows í•˜ìœ„ì— ì €ì¥\n- java ëª…ë ¹ì–´ë¡œ jar íŒŒì¼ êµ¬ë™ ì‹œ git actionsê°€ ì •ìƒì ìœ¼ë¡œ ì¢…ë£Œë˜ì§ˆ ì•Šì•„ì„œ ì´ë²ˆ ë°©ë²•ì€ ê¸°ë¡ë§Œ í•¨\n```yml\nname: springboot-cicd-ec2\n\non:\n  push:\n    branches:\n      - main\n  workflow_dispatch:\n\nenv:\n  AWS_ACCOUNT_NUMBER: **********\n  AWS_IAM_USER: ******\n  AWS_REGION: ap-northeast-2\n\npermissions:\n  id-token: write\n  contents: read\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v2\n\n      - name: Get current time\n        uses: josStorer/get-current-time@v2\n        id: current-time\n        with:\n          format: YYYYMMDDTHHmmss\n          utcOffset: \"+09:00\"\n\n      - name: Run scripts in EC2 server\n        uses: appleboy/ssh-action@master\n        with:\n          key: ${{ secrets.EC2_PEM }}\n          host: ${{ secrets.EC2_IP }}\n          username: ${{ secrets.EC2_USER }}\n          script: |\n            cd deploy/git-action-test-ec2\n            git pull origin main\n            chmod +x ./gradlew\n            ./gradlew bootJar\n            cd ../../\n            kill -15 `cat ./web/web.pid`\n            mv ./web/*.jar ./backup\n            mv ./deploy/git-action-test-ec2/build/libs/*.jar ./web/web.${{ steps.current-time.outputs.formattedTime }}.jar\n            java -Xms256m -jar ./web/web.${{ steps.current-time.outputs.formattedTime }}.jar\n```\n### AWS configuration\n* ìœ„ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê¸° ì „ì— IAMì—ì„œ í•´ì•¼í•  ì¼ì´ ìˆìŒ  \n  [Configure AWS Credentials For GitHub Actions with OIDC](https://rocksea.tistory.com/467)\n","title":"Github Action - AWS EC2ì— SpringBoot ë°°í¬","date":"2022-11-14","category":["tool","git"],"tag":["git-action","git","aws"]},"prev":{"id":"20221109","title":"Ubuntu ëª…ë ¹ì–´ ì •ë¦¬(2)","date":"2022-11-09","category":["os","linux"],"tag":["command"]},"next":{"id":"20230209","title":"[js] Default parameters of function \u0026 Spread syntax in object literals","date":"2023-02-09","category":["frontend","javascript"],"tag":["javascript","es5","default parameter","spread syntax"]},"nearPost":[{"id":"20230221","title":"wsl.exe ì‹¤í–‰ë˜ì§€ ì•ŠìŒ","date":"2023-02-21","category":["OS","window"],"tag":["wsl","ubuntu"]},{"id":"20230216","title":"Facade Pattern (íŒŒì‚¬ë“œ íŒ¨í„´)","date":"2023-02-16","category":["SW","design pattern"],"tag":["oop","design pattern"]},{"id":"20230209","title":"[js] Default parameters of function \u0026 Spread syntax in object literals","date":"2023-02-09","category":["frontend","javascript"],"tag":["javascript","es5","default parameter","spread syntax"]},{"id":"20221109","title":"Ubuntu ëª…ë ¹ì–´ ì •ë¦¬(2)","date":"2022-11-09","category":["os","linux"],"tag":["command"]},{"id":"20221028","title":"JPA ìƒì†ê´€ê³„ ë§¤í•‘ ì „ëµ","date":"2022-10-28","category":["backend","spring"],"tag":["jpa","@inheritance","@MappedSuperclass"]}]},"__N_SSG":true},"page":"/blog/[postId]","query":{"postId":"20221114"},"buildId":"QwBFiw0pxbCjdXqQ2Kkjq","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>