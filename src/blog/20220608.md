---
title: "Github Action"
date: "2022-06-08"
category: 
    - tool
    - git
tag: 
    - git-action
    - git
---

## Github blog ì œì‘ì„ ìœ„í•´ Github Action ì‚¬ìš©í•´ë³´ê¸°
### repository ìƒì„±
- `[user id].github.io` ì´ë¦„ìœ¼ë¡œ repository ìƒì„±
### deploy key ìƒì„± ë° ë“±ë¡
1. `ssh-keygen -t rsa -f ./[key file name] -C https://github.com/[user id]/[repository name]`
2. file_name.pub íŒŒì¼ì˜ ì „ì²´ ë‚´ìš©ì„ ë³µì‚¬í•˜ì—¬
    - Settings > Deploy keys > [Add deploy key] > Key ì— ë¶™ì—¬ë„£ê¸°
    - Titleì€ `Public key of ACTIONS_DEPLOY_KEY` ë¡œ ì‘ì„±
3. Settings > Environments > New environment > `github-pages` ìƒì„± í›„ í•´ë‹¹ í™˜ê²½ í´ë¦­
    - ì´í›„ Environment secretsì—ì„œ `[+] Add Secret` í´ë¦­
4. file_name íŒŒì¼ì˜ ì „ì²´ ë‚´ìš©ì„ ë³µì‚¬í•˜ì—¬
    - 3ì˜ Value ì— ë¶™ì—¬ë„£ê¸°
    - 3ì˜ Nameì€ `ACTIONS_DEPLOY_KEY` ë¡œ ì‘ì„±
### github action ì‹¤í–‰íŒŒì¼ ì‘ì„±
- deploy.yml íŒŒì¼ ì‘ì„±í•˜ì—¬ .github/workflows í•˜ìœ„ì— ì €ì¥
```yml
name: GitHub Pages

on:
  push:
    branches:
      - main
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-20.04
    concurrency:
      group: ${{ github.workflow }}-${{ github.ref }}
    steps:
      - uses: actions/checkout@v3

      - name: Setup Node
        uses: actions/setup-node@v3
        with:
          node-version: '14' #localì—ì„œ ì‚¬ìš©í•œ ë²„ì „ê³¼ ë™ì¼í•˜ê²Œ ì‘ì„±

      - name: Get yarn cache
        id: yarn-cache
        run: echo "::set-output name=dir::$(yarn cache dir)"

      - name: Cache dependencies
        uses: actions/cache@v2
        with:
          path: ${{ steps.yarn-cache.outputs.dir }}
          key: ${{ runner.os }}-yarn-${{ hashFiles('**/yarn.lock') }}
          restore-keys: |
            ${{ runner.os }}-yarn-
      - run: yarn install --frozen-lockfile
      - run: yarn stack
      - run: yarn build
      - run: yarn export # outì— ìˆëŠ” íŒŒì¼ ë‚´ìš©ì´ exportë¨

      - name: Deploy
        uses: peaceiris/actions-gh-pages@v3
        if: ${{ github.ref == 'refs/heads/main' }}
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./out
```

ğŸˆ ê¸°íƒ€ ë‚´ìš©ì€ ì¶”í›„ ë‹¤ë¥¸ í¬ìŠ¤íŠ¸ì—ì„œ ì„¤ëª….  
ì´ í¬ìŠ¤íŠ¸ì—ì„œëŠ” git actionì— ëŒ€í•´ì„œë§Œ ì •ë¦¬

### git push í›„ í™•ì¸
